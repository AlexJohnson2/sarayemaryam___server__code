from .models import *
from .forms import ImageForm

from django.views.decorators.csrf import csrf_exempt
from django.http import HttpResponse,HttpResponseBadRequest
from django import forms
from django.conf import settings
from django.shortcuts import render, redirect
from django.shortcuts import render
from django.http import JsonResponse

import os
import requests
from json import JSONEncoder
from persiantools import digits
import json


@csrf_exempt
def get_all_haraji(request):
    all = []
    count = 0
    for haraj in Haraji.objects.all():
        count += 1
        exec("this_kala{0}=".format(count)+"{}"+";this_kala{0}['id']={5};this_kala{0}['name']='{1}';this_kala{0}['text']='{2}';this_kala{0}['amount']='{3}';this_kala{0}['img']='{4}';this_kala{0}['num']='{6}';this_kala{0}['color_size']={7};this_kala{0}['number']='{0}';all.append(this_kala{0})".format(count,haraj.name,haraj.text,haraj.amount,"http://193.176.243.61:8080/media/"+str(haraj.img),haraj.id,haraj.num,haraj.color_size))

    return JsonResponse({'status':'ok','result': all},encoder=JSONEncoder)

@csrf_exempt
def add_new_haraji(request):
    """
    try:
    """ 
    data = request.POST
    Haraji.objects.create(name=data['name'],text=data['text'],img=data['img'],amount=data['amount'],num=data['num'],color_size=json.loads(str(data['color_size'])))
    return JsonResponse({'status':'ok'},encoder=JSONEncoder)
    """
    except:
        return JsonResponse({'status':'error'},encoder=JSONEncoder)
    """

@csrf_exempt
def delete_haraji(request):
    try:
        data = request.POST
        Haraji.objects.filter(id=int(data['id'])).delete()
        return JsonResponse({'status':'ok'},encoder=JSONEncoder)
    except:
        return JsonResponse({'status':'error'},encoder=JSONEncoder)

@csrf_exempt
def edit_haraji(request):
    try:
        data = request.POST
        this_kala = Haraji.objects.filter(id=int(data['id']))
        this_name = data['name']
        this_text = data['text']
        this_img = data['img']
        this_amount = data['amount']
        this_num = data['num']
        this_kala.update(name=this_name,text=this_text,img=this_img,amount=this_amount,num=this_num)
        return JsonResponse({'status':'ok'},encoder=JSONEncoder)
    except:
        return JsonResponse({'status':'error'},encoder=JSONEncoder)


# account views



@csrf_exempt
def register(request):
    """
    function for register on the system 
    """
    print(request.POST)
    if 'username' in request.POST and 'password' in request.POST and 'phonenumber' in request.POST and 'tel_id' in request.POST:
        try:
            get_users = User.objects.filter(username=request.POST['username']).get()
            return JsonResponse({'status':'error','result':'repetitious user'},encoder=JSONEncoder)
        except:
            try:
                get_users = User.objects.filter(phone_number=request.POST['phonenumber']).get()
                return JsonResponse({'status':'error','result':'repetitious phonenumber'},encoder=JSONEncoder)
            except:
                User.objects.create(username=request.POST['username'],password=request.POST['password'],phone_number=request.POST['phonenumber'],tel_id=request.POST['tel_id'],address=request.POST['address'],post_code=request.POST['post_code'])
                return JsonResponse({'status':'ok','result':request.POST},encoder=JSONEncoder)

            else:
                return JsonResponse({'status':'error'},encoder=JSONEncoder)
    else:
        return JsonResponse({'status':'error'},encoder=JSONEncoder)

@csrf_exempt
def check_user_with_password(request):
    """
    function for check user with passeord and return other user datas
    """
    try:
        this_tel_id = User.objects.filter(username=request.POST['username'],password=request.POST['password'])[0].tel_id
        this_phone = User.objects.filter(username=request.POST['username'],password=request.POST['password'])[0].phone_number
        this_address = User.objects.filter(username=request.POST['username'],password=request.POST['password'])[0].address
        this_post_code = User.objects.filter(username=request.POST['username'],password=request.POST['password'])[0].post_code
        return JsonResponse({'status':'ok','result':request.POST,'tel_id':this_tel_id,'this_phone':this_phone,'this_address':this_address,'post_code':this_post_code},encoder=JSONEncoder)
    except:
        return JsonResponse({'status':'error'},encoder=JSONEncoder)

@csrf_exempt
def checkadmin(request):
    try:
        user = Admin_user.objects.filter(username=request.POST['username'],password=request.POST['password']).get()
        return JsonResponse({'status':'ok'},encoder=JSONEncoder)
    except:
        return JsonResponse({'status':'error'},encoder=JSONEncoder)


@csrf_exempt
def edit_account(request):
    """
        function for edit account on the system 
    """
    
    try:
    
        data = request.POST
        this_user = User.objects.filter(username=data['old_username'])    
    
        try:
    
            if data['old_username']!=data['new_username']:
                new_username = User.objects.filter(username=data['new_username']).get()
                return JsonResponse({'status':'error','result':'repetitious user'},encoder=JSONEncoder)
            else:
                this_is_true_command_._this_command_for_error_to_run_except
    
        except:
            try:
    
                print(data['old_phonenumber'])
                if data['old_phonenumber']!=data['new_phonenumber']:
                    new_username = User.objects.filter(phone_number=data['new_phonenumber']).get()
                    return JsonResponse({'status':'error','result':'repetitious phonenumber'},encoder=JSONEncoder)
                else:
                    this_is_true_command_._this_command_for_error_to_run_except
    
            except:
                new_username = data['new_username']
                new_password = data['new_password']
                new_phonenumber = data['new_phonenumber']
                new_tel_id = data['new_tel_id']
                new_address = data['new_address']
                new_post_code = data['new_post_code']
                this_user.update(username=new_username,password=new_password,phone_number=new_phonenumber,tel_id=new_tel_id,address=new_address,post_code=new_post_code)
            return JsonResponse({'status':'ok','result':data},encoder=JSONEncoder)
    except:
        return JsonResponse({'status':'error'},encoder=JSONEncoder)
    
@csrf_exempt
def delete_account(request):
    """
        function for account from system
    """
    try:
        data = request.POST
        this_user = User.objects.filter(username=data['username'],password=data['password']).delete()
        return JsonResponse({'status':'ok'},encoder=JSONEncoder)
    except:
        return JsonResponse({'status':'error'},encoder=JSONEncoder)



# get all kalas

@csrf_exempt
def get_all_pooshak(request):
    """
        function for get all pooshak
    """
    all = []
    count = 0
    for pooshak in Pooshak_mardane.objects.filter():
        num = -1
        all_num = 0
        try:
            for i in pooshak.color_size["result"]:
                try:
                    for j in i:
                        num=-1
                        # print(i["size"][num])
                        try:
                            for r in range(0,len(i["size"][num])-1): 
                                num+=1 
                                print(i["size"])
                                # print(i["size"][num]["num"])
                                all_num+=int(i["size"][num]["num"])
                        except:
                            pass
                except:
                    pass
            print(all_num//2)
        except:
            pass
        count += 1
        exec("this_kala{0}=".format(count)+"{}"+";this_kala{0}['id']={5};this_kala{0}['group']='{7}';this_kala{0}['name']='{1}';this_kala{0}['text']='{2}';this_kala{0}['amount']='{3}';this_kala{0}['img']='{4}';this_kala{0}['num']='{6}';this_kala{0}['color_size']={8};all.append(this_kala{0})".format(count,pooshak.name,pooshak.text,pooshak.amount,"http://193.176.243.61:8080/media/"+str(pooshak.img),pooshak.id,all_num//2,pooshak.group,pooshak.color_size))
    count = 0
    for pooshak in Pooshak_zanane.objects.filter():
        num = -1
        all_num = 0
        try:
            for i in pooshak.color_size["result"]:
                try:
                    for j in i:
                        num=-1
                        # print(i["size"][num])
                        try:
                            for r in range(0,len(i["size"][num])-1): 
                                num+=1 
                                print(i["size"])
                                # print(i["size"][num]["num"])
                                all_num+=int(i["size"][num]["num"])
                        except:
                            pass
                except:
                    pass
            print(all_num//2)
        except:
            pass

        count += 1
        exec("this_kala{0}=".format(count)+"{}"+";this_kala{0}['id']={5};this_kala{0}['group']='{7}';this_kala{0}['name']='{1}';this_kala{0}['text']='{2}';this_kala{0}['amount']='{3}';this_kala{0}['img']='{4}';this_kala{0}['num']='{6}';this_kala{0}['color_size']={8};all.append(this_kala{0})".format(count,pooshak.name,pooshak.text,pooshak.amount,"http://193.176.243.61:8080/media/"+str(pooshak.img),pooshak.id,all_num//2,pooshak.group,pooshak.color_size))
    count = 0
    for pooshak in Pooshak_pesarane.objects.filter():
        num = -1
        all_num = 0
        try:
            for i in pooshak.color_size["result"]:
                try:
                    for j in i:
                        num=-1
                        # print(i["size"][num])
                        try:
                            for r in range(0,len(i["size"][num])-1): 
                                num+=1 
                                print(i["size"])
                                # print(i["size"][num]["num"])
                                all_num+=int(i["size"][num]["num"])
                        except:
                            pass
                except:
                    pass
            print(all_num//2)
        except:
            pass

        count += 1
        exec("this_kala{0}=".format(count)+"{}"+";this_kala{0}['id']={5};this_kala{0}['group']='{7}';this_kala{0}['name']='{1}';this_kala{0}['text']='{2}';this_kala{0}['amount']='{3}';this_kala{0}['img']='{4}';this_kala{0}['num']='{6}';this_kala{0}['color_size']={8};all.append(this_kala{0})".format(count,pooshak.name,pooshak.text,pooshak.amount,"http://193.176.243.61:8080/media/"+str(pooshak.img),pooshak.id,all_num//2,pooshak.group,pooshak.color_size))
    count = 0
    for pooshak in Pooshak_dokhtarane.objects.filter():
        num = -1
        all_num = 0
        try:
            for i in pooshak.color_size["result"]:
                try:
                    for j in i:
                        num=-1
                        # print(i["size"][num])
                        try:
                            for r in range(0,len(i["size"][num])-1): 
                                num+=1 
                                print(i["size"])
                                # print(i["size"][num]["num"])
                                all_num+=int(i["size"][num]["num"])
                        except:
                            pass
                except:
                    pass
            print(all_num//2)
        except:
            pass
        count += 1
        exec("this_kala{0}=".format(count)+"{}"+";this_kala{0}['id']={5};this_kala{0}['group']='{7}';this_kala{0}['name']='{1}';this_kala{0}['text']='{2}';this_kala{0}['amount']='{3}';this_kala{0}['img']='{4}';this_kala{0}['num']='{6}';this_kala{0}['color_size']={8};all.append(this_kala{0})".format(count,pooshak.name,pooshak.text,pooshak.amount,"http://193.176.243.61:8080/media/"+str(pooshak.img),pooshak.id,all_num//2,pooshak.group,pooshak.color_size))
    count = 0
    for pooshak in Pooshak_nozadi.objects.filter():
        num = -1
        all_num = 0
        try:
            for i in pooshak.color_size["result"]:
                try:
                    for j in i:
                        num=-1
                        # print(i["size"][num])
                        try:
                            for r in range(0,len(i["size"][num])-1): 
                                num+=1 
                                print(i["size"])
                                # print(i["size"][num]["num"])
                                all_num+=int(i["size"][num]["num"])
                        except:
                            pass
                except:
                    pass
            print(all_num//2)
        except:
            pass

        count += 1
        exec("this_kala{0}=".format(count)+"{}"+";this_kala{0}['id']={5};this_kala{0}['group']='{7}';this_kala{0}['name']='{1}';this_kala{0}['text']='{2}';this_kala{0}['amount']='{3}';this_kala{0}['img']='{4}';this_kala{0}['num']='{6}';this_kala{0}['color_size']={8};all.append(this_kala{0})".format(count,pooshak.name,pooshak.text,pooshak.amount,"http://193.176.243.61:8080/media/"+str(pooshak.img),pooshak.id,all_num//2,pooshak.group,pooshak.color_size))

    return JsonResponse({'status':'ok','result': all},encoder=JSONEncoder)
@csrf_exempt
def get_all_parcheh(request):
    """
        function for get all parcheh
    """
    all = []
    count = 0
    for parcheh in Parcheh.objects.all():
        num = -1
        all_num = 0
        try:
            for i in parcheh.color_size["result"]:
                try:
                    for j in i:
                        num=-1
                        # print(i["size"][num])
                        try:
                            for r in range(0,len(i["size"][num])-1): 
                                num+=1 
                                print(i["size"])
                                # print(i["size"][num]["num"])
                                all_num+=int(i["size"][num]["num"])
                        except:
                            pass
                except:
                    pass
            print(all_num//2)
        except:
            pass
        
        
        count += 1
        exec("this_kala{0}=".format(count)+"{}"+";this_kala{0}['id']={5};this_kala{0}['group']='{7}';this_kala{0}['name']='{1}';this_kala{0}['text']='{2}';this_kala{0}['amount']='{3}';this_kala{0}['img']='{4}';this_kala{0}['num']='{6}';this_kala{0}['number']='{0}';this_kala{0}['color_size']={8};all.append(this_kala{0})".format(count,parcheh.name,parcheh.text,parcheh.amount,"http://193.176.243.61:8080/media/"+str(parcheh.img),parcheh.id,all_num//2,parcheh.group,parcheh.color_size))

    return JsonResponse({'status':'ok','result': all},encoder=JSONEncoder)
@csrf_exempt
def get_all_hejab(request):
    """
        function for get all parcheh
    """
    all = []
    count = 0
    for hejab in Hejab_chador.objects.all():
        num = -1
        all_num = 0
        try:
            for i in hejab.color_size["result"]:
                try:
                    for j in i:
                        num=-1
                        # print(i["size"][num])
                        try:
                            for r in range(0,len(i["size"][num])-1): 
                                num+=1 
                                print(i["size"])
                                # print(i["size"][num]["num"])
                                all_num+=int(i["size"][num]["num"])
                        except:
                            pass
                except:
                    pass
            print(all_num//2)
        except:
            pass
        
        
        count += 1
        exec("this_kala{0}=".format(count)+"{}"+";this_kala{0}['id']={5};this_kala{0}['group']='{7}';this_kala{0}['name']='{1}';this_kala{0}['text']='{2}';this_kala{0}['amount']='{3}';this_kala{0}['img']='{4}';this_kala{0}['num']='{6}';this_kala{0}['number']='{0}'i;this_kala{0}['color_size']={8};all.append(this_kala{0})".format(count,hejab.name,hejab.text,hejab.amount,"http://193.176.243.61:8080/media/"+str(hejab.img),hejab.id,hejab.num,hejab.group,hejab.color_size))
    count = 0
    for hejab in Hejab_mask_pooshie.objects.all():
        num = -1
        all_num = 0
        try:
            for i in hejab.color_size["result"]:
                try:
                    for j in i:
                        num=-1
                        # print(i["size"][num])
                        try:
                            for r in range(0,len(i["size"][num])-1): 
                                num+=1 
                                print(i["size"])
                                # print(i["size"][num]["num"])
                                all_num+=int(i["size"][num]["num"])
                        except:
                            pass
                except:
                    pass
            print(all_num//2)
        except:
            pass

        count += 1
        exec("this_kala{0}=".format(count)+"{}"+";this_kala{0}['id']={5};this_kala{0}['group']='{7}';this_kala{0}['name']='{1}';this_kala{0}['text']='{2}';this_kala{0}['amount']='{3}';this_kala{0}['img']='{4}';this_kala{0}['num']='{6}';this_kala{0}['number']='{0}';this_kala{0}['color_size']={8};all.append(this_kala{0})".format(count,hejab.name,hejab.text,hejab.amount,"http://193.176.243.61:8080/media/"+str(hejab.img),hejab.id,hejab.num,hejab.group,hejab.color_size))
    count = 0
    for hejab in Hejab_roosari.objects.all():
        num = -1
        all_num = 0
        try:
            for i in hejab.color_size["result"]:
                try:
                    for j in i:
                        num=-1
                        # print(i["size"][num])
                        try:
                            for r in range(0,len(i["size"][num])-1): 
                                num+=1 
                                print(i["size"])
                                # print(i["size"][num]["num"])
                                all_num+=int(i["size"][num]["num"])
                        except:
                            pass
                except:
                    pass
            print(all_num//2)
        except:
            pass

        count += 1
        exec("this_kala{0}=".format(count)+"{}"+";this_kala{0}['id']={5};this_kala{0}['group']='{7}';this_kala{0}['name']='{1}';this_kala{0}['text']='{2}';this_kala{0}['amount']='{3}';this_kala{0}['img']='{4}';this_kala{0}['num']='{6}';this_kala{0}['number']='{0}';this_kala{0}['color_size']={8};all.append(this_kala{0})".format(count,hejab.name,hejab.text,hejab.amount,"http://193.176.243.61:8080/media/"+str(hejab.img),hejab.id,hejab.num,hejab.group,hejab.color_size))
    count = 0
    for hejab in Hejab_saghedast_dastkesh.objects.all():
        num = -1
        all_num = 0
        try:
            for i in hejab.color_size["result"]:
                try:
                    for j in i:
                        num=-1
                        # print(i["size"][num])
                        try:
                            for r in range(0,len(i["size"][num])-1): 
                                num+=1 
                                print(i["size"])
                                # print(i["size"][num]["num"])
                                all_num+=int(i["size"][num]["num"])
                        except:
                            pass
                except:
                    pass
            print(all_num//2)
        except:
            pass
        
        count += 1
        exec("this_kala{0}=".format(count)+"{}"+";this_kala{0}['id']={5};this_kala{0}['group']='{7}';this_kala{0}['name']='{1}';this_kala{0}['text']='{2}';this_kala{0}['amount']='{3}';this_kala{0}['img']='{4}';this_kala{0}['num']='{6}';this_kala{0}['number']='{0}';this_kala{0}['color_size']={8};all.append(this_kala{0})".format(count,hejab.name,hejab.text,hejab.amount,"http://193.176.243.61:8080/media/"+str(hejab.img),hejab.id,hejab.num,hejab.group,hejab.color_size))
    count = 0
    for hejab in Hejab_shal.objects.all():
        num = -1
        all_num = 0
        try:
            for i in hejab.color_size["result"]:
                try:
                    for j in i:
                        num=-1
                        # print(i["size"][num])
                        try:
                            for r in range(0,len(i["size"][num])-1): 
                                num+=1 
                                print(i["size"])
                                # print(i["size"][num]["num"])
                                all_num+=int(i["size"][num]["num"])
                        except:
                            pass
                except:
                    pass
            print(all_num//2)
        except:
            pass

        count += 1
        exec("this_kala{0}=".format(count)+"{}"+";this_kala{0}['id']={5};this_kala{0}['group']='{7}';this_kala{0}['name']='{1}';this_kala{0}['text']='{2}';this_kala{0}['amount']='{3}';this_kala{0}['img']='{4}';this_kala{0}['num']='{6}';this_kala{0}['number']='{0}';this_kala{0}['color_size']={8};all.append(this_kala{0})".format(count,hejab.name,hejab.text,hejab.amount,"http://193.176.243.61:8080/media/"+str(hejab.img),hejab.id,hejab.num,hejab.group,hejab.color_size))

    return JsonResponse({'status':'ok','result': all},encoder=JSONEncoder)
@csrf_exempt
def get_all_kharazi(request):
    """
        function for get all kharazi
    """
    all = []
    count = 0
    for kharazi in Kharazi_abzarkhayati.objects.all():
        num = -1
        all_num = 0
        try:
            for i in kharazi.color_size["result"]:
                try:
                    for j in i:
                        num=-1
                        # print(i["size"][num])
                        try:
                            for r in range(0,len(i["size"][num])-1): 
                                num+=1 
                                print(i["size"])
                                # print(i["size"][num]["num"])
                                all_num+=int(i["size"][num]["num"])
                        except:
                            pass
                except:
                    pass
            print(all_num//2)
        except:
            pass

        count += 1
        exec("this_kala{0}=".format(count)+"{}"+";this_kala{0}['id']={5};this_kala{0}['group']='{7}';this_kala{0}['name']='{1}';this_kala{0}['text']='{2}';this_kala{0}['amount']='{3}';this_kala{0}['img']='{4}';this_kala{0}['num']='{6}';this_kala{0}['number']='{0}';this_kala{0}['color_size']={8};all.append(this_kala{0})".format(count,kharazi.name,kharazi.text,kharazi.amount,"http://193.176.243.61:8080/media/"+str(kharazi.img),kharazi.id,kharazi.num,kharazi.group,kharazi.color_size))
    count = 0
    for kharazi in Kharazi_lavazemtahrir.objects.all(): 
        num = -1
        all_num = 0
        try:
            for i in kharazi.color_size["result"]:
                try:
                    for j in i:
                        num=-1
                        # print(i["size"][num])
                        try:
                            for r in range(0,len(i["size"][num])-1): 
                                num+=1 
                                print(i["size"])
                                # print(i["size"][num]["num"])
                                all_num+=int(i["size"][num]["num"])
                        except:
                            pass
                except:
                    pass
            print(all_num//2)
        except:
            pass

        count += 1
        exec("this_kala{0}=".format(count)+"{}"+";this_kala{0}['id']={5};this_kala{0}['group']='{7}';this_kala{0}['name']='{1}';this_kala{0}['text']='{2}';this_kala{0}['amount']='{3}';this_kala{0}['img']='{4}';this_kala{0}['num']='{6}';this_kala{0}['number']='{0}';this_kala{0}['color_size']={8};all.append(this_kala{0})".format(count,kharazi.name,kharazi.text,kharazi.amount,"http://193.176.243.61:8080/media/"+str(kharazi.img),kharazi.id,kharazi.num,kharazi.group,kharazi.color_size))

    return JsonResponse({'status':'ok','result': all},encoder=JSONEncoder)

@csrf_exempt
def get_all_pooshak_mardane(request):
    """
        function for get all kharazi
    """
    all = []
    count = 0
    for kala in Pooshak_mardane.objects.all():        
        num = -1
        all_num = 0
        try:
            for i in kala.color_size["result"]:
                try:
                    for j in i:
                        num=-1
                        # print(i["size"][num])
                        try:
                            for r in range(0,len(i["size"][num])-1): 
                                num+=1 
                                print(i["size"])
                                # print(i["size"][num]["num"])
                                all_num+=int(i["size"][num]["num"])
                        except:
                            pass
                except:
                    pass
            print(all_num//2)
        except:
            pass


        count += 1
        exec("this_kala{0}=".format(count)+"{}"+";this_kala{0}['id']={5};this_kala{0}['group']='{7}';this_kala{0}['name']='{1}';this_kala{0}['text']='{2}';this_kala{0}['amount']='{3}';this_kala{0}['img']='{4}';this_kala{0}['num']='{6}';this_kala{0}['number']='{0}';this_kala{0}['color_size']={8};all.append(this_kala{0})".format(count,kala.name,kala.text,kala.amount,"http://193.176.243.61:8080/media/"+str(kala.img),kala.id,all_num//2,kala.group,kala.color_size))

    return JsonResponse({'status':'ok','result': all},encoder=JSONEncoder)

@csrf_exempt
def get_all_pooshak_zanane(request):
    """
        function for get all kharazi
    """
    all = []
    count = 0
    for kala in Pooshak_zanane.objects.all():
        num = -1
        all_num = 0
        try:
            for i in kala.color_size["result"]:
                try:
                    for j in i:
                        num=-1
                        # print(i["size"][num])
                        try:
                            for r in range(0,len(i["size"][num])-1): 
                                num+=1 
                                print(i["size"])
                                # print(i["size"][num]["num"])
                                all_num+=int(i["size"][num]["num"])
                        except:
                            pass
                except:
                    pass
            print(all_num//2)
        except:
            pass            
                
        count += 1
        exec("this_kala{0}=".format(count)+"{}"+";this_kala{0}['id']={5};this_kala{0}['group']='{7}';this_kala{0}['name']='{1}';this_kala{0}['text']='{2}';this_kala{0}['amount']='{3}';this_kala{0}['img']='{4}';this_kala{0}['num']='{6}';this_kala{0}['number']='{0}';this_kala{0}['color_size']={8};all.append(this_kala{0})".format(count,kala.name,kala.text,kala.amount,"http://193.176.243.61:8080/media/"+str(kala.img),kala.id,all_num//2,kala.group,kala.color_size))

    return JsonResponse({'status':'ok','result': all},encoder=JSONEncoder)

@csrf_exempt
def get_all_pooshak_dokhtarane(request):
    """
        function for get all kharazi
    """
    all = []
    count = 0
    for kala in Pooshak_dokhtarane.objects.all():
        num = -1
        all_num = 0
        try:
            for i in kala.color_size["result"]:
                try:
                    for j in i:
                        num=-1
                        # print(i["size"][num])
                        try:
                            for r in range(0,len(i["size"][num])-1): 
                                num+=1 
                                print(i["size"])
                                # print(i["size"][num]["num"])
                                all_num+=int(i["size"][num]["num"])
                        except:
                            pass
                except:
                    pass
            print(all_num//2)
        except:
            pass
                    
                
        count += 1
        exec("this_kala{0}=".format(count)+"{}"+";this_kala{0}['id']={5};this_kala{0}['group']='{7}';this_kala{0}['name']='{1}';this_kala{0}['text']='{2}';this_kala{0}['amount']='{3}';this_kala{0}['img']='{4}';this_kala{0}['num']='{6}';this_kala{0}['number']='{0}';this_kala{0}['color_size']={8};all.append(this_kala{0})".format(count,kala.name,kala.text,kala.amount,"http://193.176.243.61:8080/media/"+str(kala.img),kala.id,all_num//2,kala.group,kala.color_size))
        
    return JsonResponse({'status':'ok','result': all},encoder=JSONEncoder)

@csrf_exempt
def get_all_pooshak_pesarane(request):
    """
        function for get all kharazi
    """
    all = []
    count = 0
    for kala in Pooshak_pesarane.objects.all():
        num = -1
        all_num = 0
        try:
            for i in kala.color_size["result"]:
                try:
                    for j in i:
                        num=-1
                        # print(i["size"][num])
                        try:
                            for r in range(0,len(i["size"][num])-1): 
                                num+=1 
                                print(i["size"])
                                # print(i["size"][num]["num"])
                                all_num+=int(i["size"][num]["num"])
                        except:
                            pass
                except:
                    pass
            print(all_num//2)
        except:
            pass            
                
        count += 1
        exec("this_kala{0}=".format(count)+"{}"+";this_kala{0}['id']={5};this_kala{0}['group']='{7}';this_kala{0}['name']='{1}';this_kala{0}['text']='{2}';this_kala{0}['amount']='{3}';this_kala{0}['img']='{4}';this_kala{0}['num']='{6}';this_kala{0}['number']='{0}';this_kala{0}['color_size']={8};all.append(this_kala{0})".format(count,kala.name,kala.text,kala.amount,"http://193.176.243.61:8080/media/"+str(kala.img),kala.id,all_num//2,kala.group,kala.color_size))
        
    return JsonResponse({'status':'ok','result': all},encoder=JSONEncoder)

@csrf_exempt
def get_all_pooshak_nozadi(request):
    """
        function for get all kharazi
    """
    all = []
    count = 0
    for kala in Pooshak_nozadi.objects.all():
        num = -1
        all_num = 0
        try:
            for i in kala.color_size["result"]:
                try:
                    for j in i:
                        num=-1
                        # print(i["size"][num])
                        try:
                            for r in range(0,len(i["size"][num])-1): 
                                num+=1 
                                print(i["size"])
                                # print(i["size"][num]["num"])
                                all_num+=int(i["size"][num]["num"])
                        except:
                            pass
                except:
                    pass
            print(all_num//2)
        except:
            pass 
                
        count += 1
        exec("this_kala{0}=".format(count)+"{}"+";this_kala{0}['id']={5};this_kala{0}['group']='{7}';this_kala{0}['name']='{1}';this_kala{0}['text']='{2}';this_kala{0}['amount']='{3}';this_kala{0}['img']='{4}';this_kala{0}['num']='{6}';this_kala{0}['number']='{0}';this_kala{0}['color_size']={8};all.append(this_kala{0})".format(count,kala.name,kala.text,kala.amount,"http://193.176.243.61:8080/media/"+str(kala.img),kala.id,all_num//2,kala.group,kala.color_size))
        
       
    return JsonResponse({'status':'ok','result': all},encoder=JSONEncoder)

@csrf_exempt
def get_all_hejab_chador(request):
    """
        function for get all kharazi
    """
    all = []
    count = 0
    for kala in Hejab_chador.objects.all():
        num = -1
        all_num = 0
        try:
            for i in kala.color_size["result"]:
                try:
                    for j in i:
                        num=-1
                        # print(i["size"][num])
                        try:
                            for r in range(0,len(i["size"][num])-1): 
                                num+=1 
                                print(i["size"])
                                # print(i["size"][num]["num"])
                                all_num+=int(i["size"][num]["num"])
                        except:
                            pass
                except:
                    pass
            print(all_num//2)
        except:
            pass 
                
        count += 1
        exec("this_kala{0}=".format(count)+"{}"+";this_kala{0}['id']={5};this_kala{0}['group']='{7}';this_kala{0}['name']='{1}';this_kala{0}['text']='{2}';this_kala{0}['amount']='{3}';this_kala{0}['img']='{4}';this_kala{0}['num']='{6}';this_kala{0}['number']='{0}';this_kala{0}['color_size']={8};all.append(this_kala{0})".format(count,kala.name,kala.text,kala.amount,"http://193.176.243.61:8080/media/"+str(kala.img),kala.id,all_num//2,kala.group,kala.color_size))
        
    return JsonResponse({'status':'ok','result': all},encoder=JSONEncoder)

@csrf_exempt
def get_all_hejab_shal(request):
    """
        function for get all kharazi
    """
    all = []
    count = 0
    for kala in Hejab_shal.objects.all():
        num = -1
        all_num = 0
        try:
            for i in kala.color_size["result"]:
                try:
                    for j in i:
                        num=-1
                        # print(i["size"][num])
                        try:
                            for r in range(0,len(i["size"][num])-1): 
                                num+=1 
                                print(i["size"])
                                # print(i["size"][num]["num"])
                                all_num+=int(i["size"][num]["num"])
                        except:
                            pass
                except:
                    pass
            print(all_num//2)
        except:
            pass            
                
        count += 1
        exec("this_kala{0}=".format(count)+"{}"+";this_kala{0}['id']={5};this_kala{0}['group']='{7}';this_kala{0}['name']='{1}';this_kala{0}['text']='{2}';this_kala{0}['amount']='{3}';this_kala{0}['img']='{4}';this_kala{0}['num']='{6}';this_kala{0}['number']='{0}';this_kala{0}['color_size']={8};all.append(this_kala{0})".format(count,kala.name,kala.text,kala.amount,"http://193.176.243.61:8080/media/"+str(kala.img),kala.id,all_num//2,kala.group,kala.color_size))
        

    return JsonResponse({'status':'ok','result': all},encoder=JSONEncoder)


@csrf_exempt
def get_all_hejab_roosari(request):
    """
        function for get all kharazi
    """
    all = []
    count = 0
    for kala in Hejab_roosari.objects.all():
        num = -1
        all_num = 0
        try:
            for i in kala.color_size["result"]:
                try:
                    for j in i:
                        num=-1
                        # print(i["size"][num])
                        try:
                            for r in range(0,len(i["size"][num])-1): 
                                num+=1 
                                print(i["size"])
                                # print(i["size"][num]["num"])
                                all_num+=int(i["size"][num]["num"])
                        except:
                            pass
                except:
                    pass
            print(all_num//2)
        except:
            pass             
                
        count += 1
        exec("this_kala{0}=".format(count)+"{}"+";this_kala{0}['id']={5};this_kala{0}['group']='{7}';this_kala{0}['name']='{1}';this_kala{0}['text']='{2}';this_kala{0}['amount']='{3}';this_kala{0}['img']='{4}';this_kala{0}['num']='{6}';this_kala{0}['number']='{0}';this_kala{0}['color_size']={8};all.append(this_kala{0})".format(count,kala.name,kala.text,kala.amount,"http://193.176.243.61:8080/media/"+str(kala.img),kala.id,all_num//2,kala.group,kala.color_size))
        
    return JsonResponse({'status':'ok','result': all},encoder=JSONEncoder)

@csrf_exempt
def get_all_hejab_saghedast_dastkesh(request):
    """
        function for get all kharazi
    """
    all = []
    count = 0
    for kala in Hejab_saghedast_dastkesh.objects.all():
        num = -1
        all_num = 0
        try:
            for i in kala.color_size["result"]:
                try:
                    for j in i:
                        num=-1
                        # print(i["size"][num])
                        try:
                            for r in range(0,len(i["size"][num])-1): 
                                num+=1 
                                print(i["size"])
                                # print(i["size"][num]["num"])
                                all_num+=int(i["size"][num]["num"])
                        except:
                            pass
                except:
                    pass
            print(all_num//2)
        except:
            pass            
                
        count += 1
        exec("this_kala{0}=".format(count)+"{}"+";this_kala{0}['id']={5};this_kala{0}['group']='{7}';this_kala{0}['name']='{1}';this_kala{0}['text']='{2}';this_kala{0}['amount']='{3}';this_kala{0}['img']='{4}';this_kala{0}['num']='{6}';this_kala{0}['number']='{0}';this_kala{0}['color_size']={8};all.append(this_kala{0})".format(count,kala.name,kala.text,kala.amount,"http://193.176.243.61:8080/media/"+str(kala.img),kala.id,all_num//2,kala.group,kala.color_size))
        
    return JsonResponse({'status':'ok','result': all},encoder=JSONEncoder)


@csrf_exempt
def get_all_hejab_mask_pooshie(request):
    """
        function for get all kharazi
    """
    all = []
    count = 0
    for kala in Hejab_mask_pooshie.objects.all():
        num = -1
        all_num = 0
        try:
            for i in kala.color_size["result"]:
                try:
                    for j in i:
                        num=-1
                        # print(i["size"][num])
                        try:
                            for r in range(0,len(i["size"][num])-1): 
                                num+=1 
                                print(i["size"])
                                # print(i["size"][num]["num"])
                                all_num+=int(i["size"][num]["num"])
                        except:
                            pass
                except:
                    pass
            print(all_num//2)
        except:
            pass            
                
        count += 1
        exec("this_kala{0}=".format(count)+"{}"+";this_kala{0}['id']={5};this_kala{0}['group']='{7}';this_kala{0}['name']='{1}';this_kala{0}['text']='{2}';this_kala{0}['amount']='{3}';this_kala{0}['img']='{4}';this_kala{0}['num']='{6}';this_kala{0}['number']='{0}';this_kala{0}['color_size']={8};all.append(this_kala{0})".format(count,kala.name,kala.text,kala.amount,"http://193.176.243.61:8080/media/"+str(kala.img),kala.id,all_num//2,kala.group,kala.color_size))
        
    return JsonResponse({'status':'ok','result': all},encoder=JSONEncoder)

@csrf_exempt
def get_all_kharazi_abzarkhayati(request):
    """
        function for get all kharazi
    """
    all = []
    count = 0
    for kala in Kharazi_abzarkhayati.objects.all():
        num = -1
        all_num = 0
        try:
            for i in kala.color_size["result"]:
                try:
                    for j in i:
                        num=-1
                        # print(i["size"][num])
                        try:
                            for r in range(0,len(i["size"][num])-1): 
                                num+=1 
                                print(i["size"])
                                # print(i["size"][num]["num"])
                                all_num+=int(i["size"][num]["num"])
                        except:
                            pass
                except:
                    pass
            print(all_num//2)
        except:
            pass            
                
        count += 1
        exec("this_kala{0}=".format(count)+"{}"+";this_kala{0}['id']={5};this_kala{0}['group']='{7}';this_kala{0}['name']='{1}';this_kala{0}['text']='{2}';this_kala{0}['amount']='{3}';this_kala{0}['img']='{4}';this_kala{0}['num']='{6}';this_kala{0}['number']='{0}';this_kala{0}['color_size']={8};all.append(this_kala{0})".format(count,kala.name,kala.text,kala.amount,"http://193.176.243.61:8080/media/"+str(kala.img),kala.id,all_num//2,kala.group,kala.color_size))
        
    return JsonResponse({'status':'ok','result': all},encoder=JSONEncoder)

@csrf_exempt
def get_all_kharazi_lavazemtahrir(request):
    """
        function for get all kharazi
    """
    all = []
    count = 0
    for kala in Kharazi_lavazemtahrir.objects.all():
        num = -1
        all_num = 0
        try:
            for i in kala.color_size["result"]:
                try:
                    for j in i:
                        num=-1
                        # print(i["size"][num])
                        try:
                            for r in range(0,len(i["size"][num])-1): 
                                num+=1 
                                print(i["size"])
                                # print(i["size"][num]["num"])
                                all_num+=int(i["size"][num]["num"])
                        except:
                            pass
                except:
                    pass
            print(all_num//2)
        except:
            pass            
                
        count += 1
        exec("this_kala{0}=".format(count)+"{}"+";this_kala{0}['id']={5};this_kala{0}['group']='{7}';this_kala{0}['name']='{1}';this_kala{0}['text']='{2}';this_kala{0}['amount']='{3}';this_kala{0}['img']='{4}';this_kala{0}['num']='{6}';this_kala{0}['number']='{0}';this_kala{0}['color_size']={8};all.append(this_kala{0})".format(count,kala.name,kala.text,kala.amount,"http://193.176.243.61:8080/media/"+str(kala.img),kala.id,all_num//2,kala.group,kala.color_size))
        
    return JsonResponse({'status':'ok','result': all},encoder=JSONEncoder)




@csrf_exempt
def get_all_sefaresh_mardane(request):
    """
        function for get all kharazi
    """
    all = []
    count = 0
    for kala in Sefaresh_mardane.objects.all():
        num = -1
        all_num = 0
        try:
            for i in kala.color_size["result"]:
                try:
                    for j in i:
                        num=-1
                        # print(i["size"][num])
                        try:
                            for r in range(0,len(i["size"][num])-1): 
                                num+=1 
                                print(i["size"])
                                # print(i["size"][num]["num"])
                                all_num+=int(i["size"][num]["num"])
                        except:
                            pass
                except:
                    pass
            print(all_num//2)
        except:
            pass
                
        count += 1
        exec("this_kala{0}=".format(count)+"{}"+";this_kala{0}['id']={5};this_kala{0}['group']='{7}';this_kala{0}['name']='{1}';this_kala{0}['text']='{2}';this_kala{0}['amount']='{3}';this_kala{0}['img']='{4}';this_kala{0}['num']='{6}';this_kala{0}['number']='{0}';this_kala{0}['color_size']={8};all.append(this_kala{0})".format(count,kala.name,kala.text,kala.amount,"http://193.176.243.61:8080/media/"+str(kala.img),kala.id,all_num//2,kala.group,kala.color_size))
        
    return JsonResponse({'status':'ok','result': all},encoder=JSONEncoder)

@csrf_exempt
def get_all_sefaresh_zanane(request):
    """
        function for get all kharazi
    """
    all = []
    count = 0
    for kala in Sefaresh_zanane.objects.all():
        num = -1
        all_num = 0
        try:
            for i in kala.color_size["result"]:
                try:
                    for j in i:
                        num=-1
                        # print(i["size"][num])
                        try:
                            for r in range(0,len(i["size"][num])-1): 
                                num+=1 
                                print(i["size"])
                                # print(i["size"][num]["num"])
                                all_num+=int(i["size"][num]["num"])
                        except:
                            pass
                except:
                    pass
            print(all_num//2)
        except:
            pass            
                
        count += 1
        exec("this_kala{0}=".format(count)+"{}"+";this_kala{0}['id']={5};this_kala{0}['group']='{7}';this_kala{0}['name']='{1}';this_kala{0}['text']='{2}';this_kala{0}['amount']='{3}';this_kala{0}['img']='{4}';this_kala{0}['num']='{6}';this_kala{0}['number']='{0}';this_kala{0}['color_size']={8};all.append(this_kala{0})".format(count,kala.name,kala.text,kala.amount,"http://193.176.243.61:8080/media/"+str(kala.img),kala.id,all_num//2,kala.group,kala.color_size))
        
    return JsonResponse({'status':'ok','result': all},encoder=JSONEncoder)

@csrf_exempt
def get_all_sefaresh_dokhtarane(request):
    """
        function for get all kharazi
    """
    all = []
    count = 0
    for kala in Sefaresh_dokhtarane.objects.all():
        num = -1
        all_num = 0
        try:
            for i in kala.color_size["result"]:
                try:
                    for j in i:
                        num=-1
                        # print(i["size"][num])
                        try:
                            for r in range(0,len(i["size"][num])-1): 
                                num+=1 
                                print(i["size"])
                                # print(i["size"][num]["num"])
                                all_num+=int(i["size"][num]["num"])
                        except:
                            pass
                except:
                    pass
            print(all_num//2)
        except:
            pass            
                
        count += 1
        exec("this_kala{0}=".format(count)+"{}"+";this_kala{0}['id']={5};this_kala{0}['group']='{7}';this_kala{0}['name']='{1}';this_kala{0}['text']='{2}';this_kala{0}['amount']='{3}';this_kala{0}['img']='{4}';this_kala{0}['num']='{6}';this_kala{0}['number']='{0}';this_kala{0}['color_size']={8};all.append(this_kala{0})".format(count,kala.name,kala.text,kala.amount,"http://193.176.243.61:8080/media/"+str(kala.img),kala.id,all_num//2,kala.group,kala.color_size))
        
    return JsonResponse({'status':'ok','result': all},encoder=JSONEncoder)

@csrf_exempt
def get_all_sefaresh_pesarane(request):
    """
        function for get all kharazi
    """
    all = []
    count = 0
    for kala in Sefaresh_pesarane.objects.all():
        num = -1
        all_num = 0
        try:
            for i in kala.color_size["result"]:
                try:
                    for j in i:
                        num=-1
                        # print(i["size"][num])
                        try:
                            for r in range(0,len(i["size"][num])-1): 
                                num+=1 
                                print(i["size"])
                                # print(i["size"][num]["num"])
                                all_num+=int(i["size"][num]["num"])
                        except:
                            pass
                except:
                    pass
            print(all_num//2)
        except:
            pass            
                
        count += 1
        exec("this_kala{0}=".format(count)+"{}"+";this_kala{0}['id']={5};this_kala{0}['group']='{7}';this_kala{0}['name']='{1}';this_kala{0}['text']='{2}';this_kala{0}['amount']='{3}';this_kala{0}['img']='{4}';this_kala{0}['num']='{6}';this_kala{0}['number']='{0}';this_kala{0}['color_size']={8};all.append(this_kala{0})".format(count,kala.name,kala.text,kala.amount,"http://193.176.243.61:8080/media/"+str(kala.img),kala.id,all_num//2,kala.group,kala.color_size))
        
    return JsonResponse({'status':'ok','result': all},encoder=JSONEncoder)

@csrf_exempt
def get_all_sefaresh_nozadi(request):
    """
        function for get all kharazi
    """
    all = []
    count = 0
    for kala in Sefaresh_nozadi.objects.all():
        num = -1
        all_num = 0
        try:
            for i in kala.color_size["result"]:
                try:
                    for j in i:
                        num=-1
                        # print(i["size"][num])
                        try:
                            for r in range(0,len(i["size"][num])-1): 
                                num+=1 
                                print(i["size"])
                                # print(i["size"][num]["num"])
                                all_num+=int(i["size"][num]["num"])
                        except:
                            pass
                except:
                    pass
            print(all_num//2)
        except:
            pass            
                
        count += 1
        exec("this_kala{0}=".format(count)+"{}"+";this_kala{0}['id']={5};this_kala{0}['group']='{7}';this_kala{0}['name']='{1}';this_kala{0}['text']='{2}';this_kala{0}['amount']='{3}';this_kala{0}['img']='{4}';this_kala{0}['num']='{6}';this_kala{0}['number']='{0}';this_kala{0}['color_size']={8};all.append(this_kala{0})".format(count,kala.name,kala.text,kala.amount,"http://193.176.243.61:8080/media/"+str(kala.img),kala.id,all_num//2,kala.group,kala.color_size))
        
    return JsonResponse({'status':'ok','result': all},encoder=JSONEncoder)

@csrf_exempt
def get_all_sefaresh_sayer(request):
    """
        function for get all kharazi
    """
    all = []
    count = 0
    for kala in Sefaresh_sayer.objects.all():
        num = -1
        all_num = 0
        try:
            for i in kala.color_size["result"]:
                try:
                    for j in i:
                        num=-1
                        # print(i["size"][num])
                        try:
                            for r in range(0,len(i["size"][num])-1): 
                                num+=1 
                                print(i["size"])
                                # print(i["size"][num]["num"])
                                all_num+=int(i["size"][num]["num"])
                        except:
                            pass
                except:
                    pass
            print(all_num//2)
        except:
            pass            
                
        count += 1
        exec("this_kala{0}=".format(count)+"{}"+";this_kala{0}['id']={5};this_kala{0}['group']='{7}';this_kala{0}['name']='{1}';this_kala{0}['text']='{2}';this_kala{0}['amount']='{3}';this_kala{0}['img']='{4}';this_kala{0}['num']='{6}';this_kala{0}['number']='{0}';this_kala{0}['color_size']={8};all.append(this_kala{0})".format(count,kala.name,kala.text,kala.amount,"http://193.176.243.61:8080/media/"+str(kala.img),kala.id,all_num//2,kala.group,kala.color_size))
        
    return JsonResponse({'status':'ok','result': all},encoder=JSONEncoder)




# add new kalas views


@csrf_exempt
def add_new_parcheh(request):
    """
    try:
        data = request.POST
        Parcheh.objects.create(name=data['name'],text=data['text'],img=data['img'],amount=data['amount'],num=data['num'],color_size=data["color_size"])
        return JsonResponse({'status':'ok'},encoder=JSONEncoder)
    except:
        return JsonResponse({'status':'error'},encoder=JSONEncoder)
    """
    if True:
        data = request.POST
        print(data["color_size"])
        print()
        Parcheh.objects.create(name=data['name'],text=data['text'],img=data['img'],amount=data['amount'],num=data['num'],color_size=json.loads(str(data['color_size'])))
        return JsonResponse({'status':'ok'},encoder=JSONEncoder)
@csrf_exempt
def add_new_pooshak(request):
    try:
        data = request.POST
        Pooshak.objects.create(name=data['name'],text=data['text'],img=data['img'],amount=data['amount'],num=data['num'],color_size=data["color_size"])
        return JsonResponse({'status':'ok'},encoder=JSONEncoder)
    except:
        return JsonResponse({'status':'error'},encoder=JSONEncoder)
    
@csrf_exempt
def add_new_hejab(request):
    try:
        data = request.POST
        Hejab.objects.create(name=data['name'],text=data['text'],img=data['img'],amount=data['amount'],num=data['num'],color_size=data["color_size"])
        return JsonResponse({'status':'ok'},encoder=JSONEncoder)
    except:
        return JsonResponse({'status':'error'},encoder=JSONEncoder)
    
@csrf_exempt
def add_new_kharazi(request):
    try:
        data = request.POST
        Kharazi.objects.create(name=data['name'],text=data['text'],img=data['img'],amount=data['amount'],num=data['num'],color_size=data["color_size"])
        return JsonResponse({'status':'ok'},encoder=JSONEncoder)
    except:
        return JsonResponse({'status':'error'},encoder=JSONEncoder)


@csrf_exempt
def add_new_pooshak_mardane(request):
    """
    try:
    """
    if True:
        data = request.POST
        print(data["color_size"])
        print()
        Pooshak_mardane.objects.create(name=data['name'],text=data['text'],img=data['img'],amount=data['amount'],num=data['num'],color_size=json.loads(str(data['color_size'])))
        return JsonResponse({'status':'ok'},encoder=JSONEncoder)
    """
    except:
        return JsonResponse({'status':'error'},encoder=JSONEncoder)
"""
@csrf_exempt
def add_new_pooshak_zanane(request):
    try:
        data = request.POST
        Pooshak_zanane.objects.create(name=data['name'],text=data['text'],img=data['img'],amount=data['amount'],num=data['num'],color_size=json.loads(str(data['color_size'])))
        return JsonResponse({'status':'ok'},encoder=JSONEncoder)
    except:
        return JsonResponse({'status':'error'},encoder=JSONEncoder)

@csrf_exempt
def add_new_pooshak_dokhtarane(request):
    try:
        data = request.POST
        Pooshak_dokhtarane.objects.create(name=data['name'],text=data['text'],img=data['img'],amount=data['amount'],num=data['num'],color_size=json.loads(str(data['color_size'])))
        return JsonResponse({'status':'ok'},encoder=JSONEncoder)
    except:
        return JsonResponse({'status':'error'},encoder=JSONEncoder)

@csrf_exempt
def add_new_pooshak_pesarane(request):
    try:
        data = request.POST
        Pooshak_pesarane.objects.create(name=data['name'],text=data['text'],img=data['img'],amount=data['amount'],num=data['num'],color_size=json.loads(str(data['color_size'])))
        return JsonResponse({'status':'ok'},encoder=JSONEncoder)
    except:
        return JsonResponse({'status':'error'},encoder=JSONEncoder)

@csrf_exempt
def add_new_pooshak_nozadi(request):
    try:
        data = request.POST
        Pooshak_nozadi.objects.create(name=data['name'],text=data['text'],img=data['img'],amount=data['amount'],num=data['num'],color_size=json.loads(str(data['color_size'])))
        return JsonResponse({'status':'ok'},encoder=JSONEncoder)
    except:
        return JsonResponse({'status':'error'},encoder=JSONEncoder)

@csrf_exempt
def add_new_hejab_chador(request):
    try:
        data = request.POST
        Hejab_chador.objects.create(name=data['name'],text=data['text'],img=data['img'],amount=data['amount'],num=data['num'],color_size=json.loads(str(data['color_size'])))
        return JsonResponse({'status':'ok'},encoder=JSONEncoder)
    except:
        return JsonResponse({'status':'error'},encoder=JSONEncoder)

@csrf_exempt
def add_new_hejab_shal(request):
    try:
        data = request.POST
        Hejab_shal.objects.create(name=data['name'],text=data['text'],img=data['img'],amount=data['amount'],num=data['num'],color_size=json.loads(str(data['color_size'])))
        return JsonResponse({'status':'ok'},encoder=JSONEncoder)
    except:
        return JsonResponse({'status':'error'},encoder=JSONEncoder)

@csrf_exempt
def add_new_hejab_roosari(request):
    try:
        data = request.POST
        Hejab_roosari.objects.create(name=data['name'],text=data['text'],img=data['img'],amount=data['amount'],num=data['num'],color_size=json.loads(str(data['color_size'])))
        return JsonResponse({'status':'ok'},encoder=JSONEncoder)
    except:
        return JsonResponse({'status':'error'},encoder=JSONEncoder)

@csrf_exempt
def add_new_hejab_saghedast_dastkesh(request):
    try:
        data = request.POST
        Hejab_saghedast_dastkesh.objects.create(name=data['name'],text=data['text'],img=data['img'],amount=data['amount'],num=data['num'],color_size=json.loads(str(data['color_size'])))
        return JsonResponse({'status':'ok'},encoder=JSONEncoder)
    except:
        return JsonResponse({'status':'error'},encoder=JSONEncoder)

@csrf_exempt
def add_new_hejab_mask_pooshie(request):
    try:
        data = request.POST
        Hejab_mask_pooshie.objects.create(name=data['name'],text=data['text'],img=data['img'],amount=data['amount'],num=data['num'],color_size=json.loads(str(data['color_size'])))
        return JsonResponse({'status':'ok'},encoder=JSONEncoder)
    except:
        return JsonResponse({'status':'error'},encoder=JSONEncoder)

@csrf_exempt
def add_new_kharazi_abzarkhayati(request):
    try:
        data = request.POST
        Kharazi_abzarkhayati.objects.create(name=data['name'],text=data['text'],img=data['img'],amount=data['amount'],num=data['num'],color_size=json.loads(str(data['color_size'])))
        return JsonResponse({'status':'ok'},encoder=JSONEncoder)
    except:
        return JsonResponse({'status':'error'},encoder=JSONEncoder)

@csrf_exempt
def add_new_kharazi_lavazemtahrir(request):
    try:
        data = request.POST
        Kharazi_lavazemtahrir.objects.create(name=data['name'],text=data['text'],img=data['img'],amount=data['amount'],num=data['num'],color_size=json.loads(str(data['color_size'])))
        return JsonResponse({'status':'ok'},encoder=JSONEncoder)
    except:
        return JsonResponse({'status':'error'},encoder=JSONEncoder)







@csrf_exempt
def add_new_sefaresh_mardane(request):
    try:
        data = request.POST
        Sefaresh_mardane.objects.create(name=data['name'],text=data['text'],img=data['img'],amount=data['amount'],num=data['num'],color_size=json.loads(str(data['color_size'])))
        return JsonResponse({'status':'ok'},encoder=JSONEncoder)
    except:
        return JsonResponse({'status':'error'},encoder=JSONEncoder)

@csrf_exempt
def add_new_sefaresh_zanane(request):
    try:
        data = request.POST
        Sefaresh_zanane.objects.create(name=data['name'],text=data['text'],img=data['img'],amount=data['amount'],num=data['num'],color_size=json.loads(str(data['color_size'])))
        return JsonResponse({'status':'ok'},encoder=JSONEncoder)
    except:
        return JsonResponse({'status':'error'},encoder=JSONEncoder)

@csrf_exempt
def add_new_sefaresh_dokhtarane(request):
    try:
        data = request.POST
        Sefaresh_dokhtarane.objects.create(name=data['name'],text=data['text'],img=data['img'],amount=data['amount'],num=data['num'],color_size=json.loads(str(data['color_size'])))
        return JsonResponse({'status':'ok'},encoder=JSONEncoder)
    except:
        return JsonResponse({'status':'error'},encoder=JSONEncoder)

@csrf_exempt
def add_new_sefaresh_pesarane(request):
    try:
        data = request.POST
        Sefaresh_pesarane.objects.create(name=data['name'],text=data['text'],img=data['img'],amount=data['amount'],num=data['num'],color_size=json.loads(str(data['color_size'])))
        return JsonResponse({'status':'ok'},encoder=JSONEncoder)
    except:
        return JsonResponse({'status':'error'},encoder=JSONEncoder)

@csrf_exempt
def add_new_sefaresh_nozadi(request):
    try:
        data = request.POST
        Sefaresh_nozadi.objects.create(name=data['name'],text=data['text'],img=data['img'],amount=data['amount'],num=data['num'],color_size=json.loads(str(data['color_size'])))
        return JsonResponse({'status':'ok'},encoder=JSONEncoder)
    except:
        return JsonResponse({'status':'error'},encoder=JSONEncoder)

@csrf_exempt
def add_new_sefaresh_sayer(request):
    try:
        data = request.POST
        Sefaresh_sayer.objects.create(name=data['name'],text=data['text'],img=data['img'],amount=data['amount'],num=data['num'],color_size=json.loads(str(data['color_size'])))
        return JsonResponse({'status':'ok'},encoder=JSONEncoder)
    except:
        return JsonResponse({'status':'error'},encoder=JSONEncoder)



# delete models.object functions  

@csrf_exempt
def delete_parcheh(request):
    try:
        data = request.POST
        Parcheh.objects.filter(id=int(data['id'])).delete()
        return JsonResponse({'status':'ok'},encoder=JSONEncoder)
    except:
        return JsonResponse({'status':'error'},encoder=JSONEncoder)
    
@csrf_exempt
def delete_pooshak(request):
    try:
        data = request.POST
        Pooshak.objects.filter(id=int(data['id'])).delete()
        return JsonResponse({'status':'ok'},encoder=JSONEncoder)
    except:
        return JsonResponse({'status':'error'},encoder=JSONEncoder)
    
@csrf_exempt
def delete_hejab(request):
    try:
        data = request.POST
        Hejab.objects.filter(id=int(data['id'])).delete()
        return JsonResponse({'status':'ok'},encoder=JSONEncoder)
    except:
        return JsonResponse({'status':'error'},encoder=JSONEncoder)
    
@csrf_exempt
def delete_kharazi(request):
    try:
        data = request.POST
        Kharazi.objects.filter(id=int(data['id'])).delete()
        return JsonResponse({'status':'ok'},encoder=JSONEncoder)
    except:
        return JsonResponse({'status':'error'},encoder=JSONEncoder)
    
@csrf_exempt
def delete_pooshak_mardane(request):
    try:
        data = request.POST
        Pooshak_mardane.objects.filter(id=int(data['id'])).delete()
        return JsonResponse({'status':'ok'},encoder=JSONEncoder)
    except:
        return JsonResponse({'status':'error'},encoder=JSONEncoder)
    
@csrf_exempt
def delete_pooshak_zanane(request):
    try:
        data = request.POST
        Pooshak_zanane.objects.filter(id=int(data['id'])).delete()
        return JsonResponse({'status':'ok'},encoder=JSONEncoder)
    except:
        return JsonResponse({'status':'error'},encoder=JSONEncoder)
    
@csrf_exempt
def delete_pooshak_dokhtarane(request):
    try:
        data = request.POST
        Pooshak_dokhtarane.objects.filter(id=int(data['id'])).delete()
        return JsonResponse({'status':'ok'},encoder=JSONEncoder)
    except:
        return JsonResponse({'status':'error'},encoder=JSONEncoder)

@csrf_exempt
def delete_pooshak_pesarane(request):
    try:
        data = request.POST
        Pooshak_pesarane.objects.filter(id=int(data['id'])).delete()
        return JsonResponse({'status':'ok'},encoder=JSONEncoder)
    except:
        return JsonResponse({'status':'error'},encoder=JSONEncoder)

@csrf_exempt
def delete_pooshak_nozadi(request):
    try:
        data = request.POST
        Pooshak_nozadi.objects.filter(id=int(data['id'])).delete()
        return JsonResponse({'status':'ok'},encoder=JSONEncoder)
    except:
        return JsonResponse({'status':'error'},encoder=JSONEncoder)

@csrf_exempt
def delete_hejab_chador(request):
    try:
        data = request.POST
        Hejab_chador.objects.filter(id=int(data['id'])).delete()
        return JsonResponse({'status':'ok'},encoder=JSONEncoder)
    except:
        return JsonResponse({'status':'error'},encoder=JSONEncoder)

@csrf_exempt
def delete_hejab_shal(request):
    try:
        data = request.POST
        Hejab_shal.objects.filter(id=int(data['id'])).delete()
        return JsonResponse({'status':'ok'},encoder=JSONEncoder)
    except:
        return JsonResponse({'status':'error'},encoder=JSONEncoder)


@csrf_exempt
def delete_hejab_roosari(request):
    try:
        data = request.POST
        Hejab_roosari.objects.filter(id=int(data['id'])).delete()
        return JsonResponse({'status':'ok'},encoder=JSONEncoder)
    except:
        return JsonResponse({'status':'error'},encoder=JSONEncoder)

@csrf_exempt
def delete_hejab_saghedast_dastkesh(request):
    try:
        data = request.POST
        Hejab_saghedast_dastkesh.objects.filter(id=int(data['id'])).delete()
        return JsonResponse({'status':'ok'},encoder=JSONEncoder)
    except:
        return JsonResponse({'status':'error'},encoder=JSONEncoder)

@csrf_exempt
def delete_hejab_mask_pooshie(request):
    try:
        data = request.POST
        Hejab_mask_pooshie.objects.filter(id=int(data['id'])).delete()
        return JsonResponse({'status':'ok'},encoder=JSONEncoder)
    except:
        return JsonResponse({'status':'error'},encoder=JSONEncoder)


@csrf_exempt
def delete_kharazi_abzarkhayati(request):
    try:
        data = request.POST
        Kharazi_abzarkhayati.objects.filter(id=int(data['id'])).delete()
        return JsonResponse({'status':'ok'},encoder=JSONEncoder)
    except:
        return JsonResponse({'status':'error'},encoder=JSONEncoder)

@csrf_exempt
def delete_kharazi_lavazemtahrir(request):
    try:
        data = request.POST
        Kharazi_lavazemtahrir.objects.filter(id=int(data['id'])).delete()
        return JsonResponse({'status':'ok'},encoder=JSONEncoder)
    except:
        return JsonResponse({'status':'error'},encoder=JSONEncoder)
    
    



@csrf_exempt
def delete_sefaresh_mardane(request):
    try:
        data = request.POST
        Sefaresh_mardane.objects.filter(id=int(data['id'])).delete()
        return JsonResponse({'status':'ok'},encoder=JSONEncoder)
    except:
        return JsonResponse({'status':'error'},encoder=JSONEncoder)
    
@csrf_exempt
def delete_sefaresh_zanane(request):
    try:
        data = request.POST
        Sefaresh_zanane.objects.filter(id=int(data['id'])).delete()
        return JsonResponse({'status':'ok'},encoder=JSONEncoder)
    except:
        return JsonResponse({'status':'error'},encoder=JSONEncoder)
    
@csrf_exempt
def delete_sefaresh_dokhtarane(request):
    try:
        data = request.POST
        Sefaresh_dokhtarane.objects.filter(id=int(data['id'])).delete()
        return JsonResponse({'status':'ok'},encoder=JSONEncoder)
    except:
        return JsonResponse({'status':'error'},encoder=JSONEncoder)

@csrf_exempt
def delete_sefaresh_pesarane(request):
    try:
        data = request.POST
        Sefaresh_pesarane.objects.filter(id=int(data['id'])).delete()
        return JsonResponse({'status':'ok'},encoder=JSONEncoder)
    except:
        return JsonResponse({'status':'error'},encoder=JSONEncoder)

@csrf_exempt
def delete_sefaresh_nozadi(request):
    try:
        data = request.POST
        Sefaresh_nozadi.objects.filter(id=int(data['id'])).delete()
        return JsonResponse({'status':'ok'},encoder=JSONEncoder)
    except:
        return JsonResponse({'status':'error'},encoder=JSONEncoder)

@csrf_exempt
def delete_sefaresh_sayer(request):
    try:
        data = request.POST
        Sefaresh_sayer.objects.filter(id=int(data['id'])).delete()
        return JsonResponse({'status':'ok'},encoder=JSONEncoder)
    except:
        return JsonResponse({'status':'error'},encoder=JSONEncoder)


# edit models.object functions  
    
@csrf_exempt
def edit_parcheh(request):
    try:
        data = request.POST
        this_kala = Parcheh.objects.filter(id=int(data['id']))
        this_name = data['name']
        this_text = data['text']
        this_img = data['img']
        this_amount = data['amount']
        this_num = data['num']
        this_kala.update(name=this_name,text=this_text,img=this_img,amount=this_amount,num=this_num,color_size=json.loads(str(data['color_size'])))
        return JsonResponse({'status':'ok'},encoder=JSONEncoder)
    except:
        return JsonResponse({'status':'error'},encoder=JSONEncoder)
    
@csrf_exempt
def edit_pooshak(request):
    # try:
    data = request.POST
    this_kala = Pooshak.objects.filter(id=int(data['id']))
    this_name = data['name']
    this_text = data['text']
    this_img = data['img']
    this_amount = data['amount']
    this_num = data['num']
    this_kala.update(name=this_name,text=this_text,img=this_img,amount=this_amount,num=this_num,color_size=json.loads(str(data['color_size'])))
    return JsonResponse({'status':'ok'},encoder=JSONEncoder)
    # except:
    #     return JsonResponse({'status':'error'},encoder=JSONEncoder)
    
@csrf_exempt
def edit_hejab(request):
    try:
        data = request.POST
        this_kala = Hejab.objects.filter(id=int(data['id']))
        this_name = data['name']
        this_text = data['text']
        this_img = data['img']
        this_amount = data['amount']
        this_num = data['num']
        this_kala.update(name=this_name,text=this_text,img=this_img,amount=this_amount,num=this_num,color_size=json.loads(str(data['color_size'])))
        return JsonResponse({'status':'ok'},encoder=JSONEncoder)
    except:
        return JsonResponse({'status':'error'},encoder=JSONEncoder)
    
@csrf_exempt
def edit_kharazi(request):
    try:
        data = request.POST
        this_kala = Kharazi.objects.filter(id=int(data['id']))
        this_name = data['name']
        this_text = data['text']
        this_img = data['img']
        this_amount = data['amount']
        this_num = data['num']
        this_kala.update(name=this_name,text=this_text,img=this_img,amount=this_amount,num=this_num,color_size=json.loads(str(data['color_size'])))
        return JsonResponse({'status':'ok'},encoder=JSONEncoder)
    except:
        return JsonResponse({'status':'error'},encoder=JSONEncoder)
    
@csrf_exempt
def edit_pooshak_mardane(request):
    try:
        data = request.POST
        this_kala = Pooshak_mardane.objects.filter(id=int(data['id']))
        this_name = data['name']
        this_text = data['text']
        this_img = data['img']
        this_amount = data['amount']
        this_num = data['num']
        this_kala.update(name=this_name,text=this_text,img=this_img,amount=this_amount,num=this_num,color_size=json.loads(str(data['color_size'])))
        return JsonResponse({'status':'ok'},encoder=JSONEncoder)
    except:
        return JsonResponse({'status':'error'},encoder=JSONEncoder)


@csrf_exempt
def edit_pooshak_zanane(request):
    try:
        data = request.POST
        this_kala = Pooshak_zanane.objects.filter(id=int(data['id']))
        this_name = data['name']
        this_text = data['text']
        this_img = data['img']
        this_amount = data['amount']
        this_num = data['num']
        this_kala.update(name=this_name,text=this_text,img=this_img,amount=this_amount,num=this_num,color_size=json.loads(str(data['color_size'])))
        return JsonResponse({'status':'ok'},encoder=JSONEncoder)
    except:
        return JsonResponse({'status':'error'},encoder=JSONEncoder)

@csrf_exempt
def edit_pooshak_dokhtarane(request):
    try:
        data = request.POST
        this_kala = Pooshak_dokhtarane.objects.filter(id=int(data['id']))
        this_name = data['name']
        this_text = data['text']
        this_img = data['img']
        this_amount = data['amount']
        this_num = data['num']
        this_kala.update(name=this_name,text=this_text,img=this_img,amount=this_amount,num=this_num,color_size=json.loads(str(data['color_size'])))
        return JsonResponse({'status':'ok'},encoder=JSONEncoder)
    except:
        return JsonResponse({'status':'error'},encoder=JSONEncoder)

@csrf_exempt
def edit_pooshak_pesarane(request):
    try:
        data = request.POST
        this_kala = Pooshak_pesarane.objects.filter(id=int(data['id']))
        this_name = data['name']
        this_text = data['text']
        this_img = data['img']
        this_amount = data['amount']
        this_num = data['num']
        this_kala.update(name=this_name,text=this_text,img=this_img,amount=this_amount,num=this_num,color_size=json.loads(str(data['color_size'])))
        return JsonResponse({'status':'ok'},encoder=JSONEncoder)
    except:
        return JsonResponse({'status':'error'},encoder=JSONEncoder)

@csrf_exempt
def edit_pooshak_nozadi(request):
    try:
        data = request.POST
        this_kala = Pooshak_nozadi.objects.filter(id=int(data['id']))
        this_name = data['name']
        this_text = data['text']
        this_img = data['img']
        this_amount = data['amount']
        this_num = data['num']
        this_kala.update(name=this_name,text=this_text,img=this_img,amount=this_amount,num=this_num,color_size=json.loads(str(data['color_size'])))
        return JsonResponse({'status':'ok'},encoder=JSONEncoder)
    except:
        return JsonResponse({'status':'error'},encoder=JSONEncoder)

@csrf_exempt
def edit_hejab_chador(request):
    try:
        data = request.POST
        this_kala = Hejab_chador.objects.filter(id=int(data['id']))
        this_name = data['name']
        this_text = data['text']
        this_img = data['img']
        this_amount = data['amount']
        this_num = data['num']
        this_kala.update(name=this_name,text=this_text,img=this_img,amount=this_amount,num=this_num,color_size=json.loads(str(data['color_size'])))
        return JsonResponse({'status':'ok'},encoder=JSONEncoder)
    except:
        return JsonResponse({'status':'error'},encoder=JSONEncoder)

@csrf_exempt
def edit_hejab_shal(request):
    try:
        data = request.POST
        this_kala = Hejab_shal.objects.filter(id=int(data['id']))
        this_name = data['name']
        this_text = data['text']
        this_img = data['img']
        this_amount = data['amount']
        this_num = data['num']
        this_kala.update(name=this_name,text=this_text,img=this_img,amount=this_amount,num=this_num,color_size=json.loads(str(data['color_size'])))
        return JsonResponse({'status':'ok'},encoder=JSONEncoder)
    except:
        return JsonResponse({'status':'error'},encoder=JSONEncoder)

@csrf_exempt
def edit_hejab_roosari(request):
    try:
        data = request.POST
        this_kala = Hejab_roosari.objects.filter(id=int(data['id']))
        this_name = data['name']
        this_text = data['text']
        this_img = data['img']
        this_amount = data['amount']
        this_num = data['num']
        this_kala.update(name=this_name,text=this_text,img=this_img,amount=this_amount,num=this_num,color_size=json.loads(str(data['color_size'])))
        return JsonResponse({'status':'ok'},encoder=JSONEncoder)
    except:
        return JsonResponse({'status':'error'},encoder=JSONEncoder)

@csrf_exempt
def edit_hejab_saghedast_dastkesh(request):
    try:
        data = request.POST
        this_kala = Hejab_saghedast_dastkesh.objects.filter(id=int(data['id']))
        this_name = data['name']
        this_text = data['text']
        this_img = data['img']
        this_amount = data['amount']
        this_num = data['num']
        this_kala.update(name=this_name,text=this_text,img=this_img,amount=this_amount,num=this_num,color_size=json.loads(str(data['color_size'])))
        return JsonResponse({'status':'ok'},encoder=JSONEncoder)
    except:
        return JsonResponse({'status':'error'},encoder=JSONEncoder)

@csrf_exempt
def edit_hejab_mask_pooshie(request):
    try:
        data = request.POST
        this_kala = Hejab_mask_pooshie.objects.filter(id=int(data['id']))
        this_name = data['name']
        this_text = data['text']
        this_img = data['img']
        this_amount = data['amount']
        this_num = data['num']
        this_kala.update(name=this_name,text=this_text,img=this_img,amount=this_amount,num=this_num,color_size=json.loads(str(data['color_size'])))
        return JsonResponse({'status':'ok'},encoder=JSONEncoder)
    except:
        return JsonResponse({'status':'error'},encoder=JSONEncoder)


@csrf_exempt
def edit_kharazi_abzarkhayati(request):
    try:
        data = request.POST
        this_kala = Kharazi_abzarkhayati.objects.filter(id=int(data['id']))
        this_name = data['name']
        this_text = data['text']
        this_img = data['img']
        this_amount = data['amount']
        this_num = data['num']
        this_kala.update(name=this_name,text=this_text,img=this_img,amount=this_amount,num=this_num,color_size=json.loads(str(data['color_size'])))
        return JsonResponse({'status':'ok'},encoder=JSONEncoder)
    except:
        return JsonResponse({'status':'error'},encoder=JSONEncoder)

@csrf_exempt
def edit_kharazi_lavazemtahrir(request):
    try:
        data = request.POST
        this_kala = Kharazi_lavazemtahrir.objects.filter(id=int(data['id']))
        this_name = data['name']
        this_text = data['text']
        this_img = data['img']
        this_amount = data['amount']
        this_num = data['num']
        this_kala.update(name=this_name,text=this_text,img=this_img,amount=this_amount,num=this_num,color_size=json.loads(str(data['color_size'])))
        return JsonResponse({'status':'ok'},encoder=JSONEncoder)
    except:
        return JsonResponse({'status':'error'},encoder=JSONEncoder)








@csrf_exempt
def edit_sefaresh_mardane(request):
    try:
        data = request.POST
        this_kala = Sefaresh_mardane.objects.filter(id=int(data['id']))
        this_name = data['name']
        this_text = data['text']
        this_img = data['img']
        this_amount = data['amount']
        this_num = data['num']
        this_kala.update(name=this_name,text=this_text,img=this_img,amount=this_amount,num=this_num,color_size=json.loads(str(data['color_size'])))
        return JsonResponse({'status':'ok'},encoder=JSONEncoder)
    except:
        return JsonResponse({'status':'error'},encoder=JSONEncoder)


@csrf_exempt
def edit_sefaresh_zanane(request):
    try:
        data = request.POST
        this_kala = Sefaresh_zanane.objects.filter(id=int(data['id']))
        this_name = data['name']
        this_text = data['text']
        this_img = data['img']
        this_amount = data['amount']
        this_num = data['num']
        this_kala.update(name=this_name,text=this_text,img=this_img,amount=this_amount,num=this_num,color_size=json.loads(str(data['color_size'])))
        return JsonResponse({'status':'ok'},encoder=JSONEncoder)
    except:
        return JsonResponse({'status':'error'},encoder=JSONEncoder)

@csrf_exempt
def edit_sefaresh_dokhtarane(request):
    try:
        data = request.POST
        this_kala = Sefaresh_dokhtarane.objects.filter(id=int(data['id']))
        this_name = data['name']
        this_text = data['text']
        this_img = data['img']
        this_amount = data['amount']
        this_num = data['num']
        this_kala.update(name=this_name,text=this_text,img=this_img,amount=this_amount,num=this_num,color_size=json.loads(str(data['color_size'])))
        return JsonResponse({'status':'ok'},encoder=JSONEncoder)
    except:
        return JsonResponse({'status':'error'},encoder=JSONEncoder)

@csrf_exempt
def edit_sefaresh_pesarane(request):
    try:
        data = request.POST
        this_kala = Sefaresh_pesarane.objects.filter(id=int(data['id']))
        this_name = data['name']
        this_text = data['text']
        this_img = data['img']
        this_amount = data['amount']
        this_num = data['num']
        this_kala.update(name=this_name,text=this_text,img=this_img,amount=this_amount,num=this_num,color_size=json.loads(str(data['color_size'])))
        return JsonResponse({'status':'ok'},encoder=JSONEncoder)
    except:
        return JsonResponse({'status':'error'},encoder=JSONEncoder)

@csrf_exempt
def edit_sefaresh_nozadi(request):
    try:
        data = request.POST
        this_kala = Sefaresh_nozadi.objects.filter(id=int(data['id']))
        this_name = data['name']
        this_text = data['text']
        this_img = data['img']
        this_amount = data['amount']
        this_num = data['num']
        this_kala.update(name=this_name,text=this_text,img=this_img,amount=this_amount,num=this_num,color_size=json.loads(str(data['color_size'])))
        return JsonResponse({'status':'ok'},encoder=JSONEncoder)
    except:
        return JsonResponse({'status':'error'},encoder=JSONEncoder)

@csrf_exempt
def edit_sefaresh_sayer(request):
    try:
        data = request.POST
        this_kala = Sefaresh_sayer.objects.filter(id=int(data['id']))
        this_name = data['name']
        this_text = data['text']
        this_img = data['img']
        this_amount = data['amount']
        this_num = data['num']
        this_kala.update(name=this_name,text=this_text,img=this_img,amount=this_amount,num=this_num,color_size=json.loads(str(data['color_size'])))
        return JsonResponse({'status':'ok'},encoder=JSONEncoder)
    except:
        return JsonResponse({'status':'error'},encoder=JSONEncoder)



    
# add to num's from models.objects
    
@csrf_exempt
def add_num_pooshak(request):
    try:
        data = request.POST
        this_kala = Pooshak.objects.filter(id=data['id'])
        # this_num = data['num']
        old_num = this_kala[0].num
        if old_num=="ناموجود":
            old_num = 0
            new_num = int(digits.en_to_fa(old_num))+digits.en_to_fa(int(data['num']))
        else:
            new_num = int(digits.en_to_fa(old_num))+digits.en_to_fa(int(data['num']))
        this_kala.update(num=new_num)
        return JsonResponse({'status':'ok'},encoder=JSONEncoder)
    except:
        return JsonResponse({'status':'error'},encoder=JSONEncoder)


    
@csrf_exempt
def add_num_hejab(request):
    try:
        data = request.POST
        this_kala = Hejab.objects.filter(id=data['id'])
        # this_num = data['num']
        old_num = this_kala[0].num
        if old_num=="ناموجود":
            old_num = 0
            new_num = int(digits.en_to_fa(old_num))+digits.en_to_fa(int(data['num']))
        else:
            new_num = int(digits.en_to_fa(old_num))+digits.en_to_fa(int(data['num']))
        this_kala.update(num=new_num)
        return JsonResponse({'status':'ok'},encoder=JSONEncoder)
    except:
        return JsonResponse({'status':'error'},encoder=JSONEncoder)

 
@csrf_exempt
def add_num_parcheh(request):
    try:
        data = request.POST
        this_kala = Parcheh.objects.filter(id=data['id'])
        # this_num = data['num']
        old_num = this_kala[0].num
        if old_num=="ناموجود":
            old_num = 0
            new_num = int(digits.en_to_fa(old_num))+digits.en_to_fa(int(data['num']))
        else:
            new_num = int(digits.en_to_fa(old_num))+digits.en_to_fa(int(data['num']))
        this_kala.update(num=new_num)
        return JsonResponse({'status':'ok'},encoder=JSONEncoder)
    except:
        return JsonResponse({'status':'error'},encoder=JSONEncoder)


@csrf_exempt
def add_num_kharazi(request):
    try:
        data = request.POST
        this_kala = Kharazi.objects.filter(id=data['id'])
        # this_num = data['num']
        old_num = this_kala[0].num
        if old_num=="ناموجود":
            old_num = 0
            new_num = int(digits.en_to_fa(old_num))+digits.en_to_fa(int(data['num']))
        else:
            new_num = int(digits.en_to_fa(old_num))+digits.en_to_fa(int(data['num']))
        this_kala.update(num=new_num)
        return JsonResponse({'status':'ok'},encoder=JSONEncoder)
    except:
        return JsonResponse({'status':'error'},encoder=JSONEncoder)

@csrf_exempt
def add_num_pooshak_mardane(request):
    try:
        data = request.POST
        this_kala = Pooshak_mardane.objects.filter(id=data['id'])
        # this_num = data['num']
        old_num = this_kala[0].num
        if old_num=="ناموجود":
            old_num = 0
            new_num = int(digits.en_to_fa(old_num))+digits.en_to_fa(int(data['num']))
        else:
            new_num = int(digits.en_to_fa(old_num))+digits.en_to_fa(int(data['num']))
        this_kala.update(num=new_num)
        return JsonResponse({'status':'ok'},encoder=JSONEncoder)
    except:
        return JsonResponse({'status':'error'},encoder=JSONEncoder)

@csrf_exempt
def add_num_pooshak_zanane(request):
    try:
        data = request.POST
        this_kala = Pooshak_zanane.objects.filter(id=data['id'])
        # this_num = data['num']
        old_num = this_kala[0].num
        if old_num=="ناموجود":
            old_num = 0
            new_num = int(digits.en_to_fa(old_num))+digits.en_to_fa(int(data['num']))
        else:
            new_num = int(digits.en_to_fa(old_num))+digits.en_to_fa(int(data['num']))
        this_kala.update(num=new_num)
        return JsonResponse({'status':'ok'},encoder=JSONEncoder)
    except:
        return JsonResponse({'status':'error'},encoder=JSONEncoder)

@csrf_exempt
def add_num_pooshak_dokhtarane(request):
    try:
        data = request.POST
        this_kala = Pooshak_dokhtarane.objects.filter(id=data['id'])
        # this_num = data['num']
        old_num = this_kala[0].num
        if old_num=="ناموجود":
            old_num = 0
            new_num = int(digits.en_to_fa(old_num))+digits.en_to_fa(int(data['num']))
        else:
            new_num = int(digits.en_to_fa(old_num))+digits.en_to_fa(int(data['num']))
        this_kala.update(num=new_num)
        return JsonResponse({'status':'ok'},encoder=JSONEncoder)
    except:
        return JsonResponse({'status':'error'},encoder=JSONEncoder)

@csrf_exempt
def add_num_pooshak_pesarane(request):
    try:
        data = request.POST
        this_kala = Pooshak_pesarane.objects.filter(id=data['id'])
        # this_num = data['num']
        old_num = this_kala[0].num
        if old_num=="ناموجود":
            old_num = 0
            new_num = int(digits.en_to_fa(old_num))+digits.en_to_fa(int(data['num']))
        else:
            new_num = int(digits.en_to_fa(old_num))+digits.en_to_fa(int(data['num']))
        this_kala.update(num=new_num)
        return JsonResponse({'status':'ok'},encoder=JSONEncoder)
    except:
        return JsonResponse({'status':'error'},encoder=JSONEncoder)

@csrf_exempt
def add_num_pooshak_nozadi(request):
    try:
        data = request.POST
        this_kala = Pooshak_nozadi.objects.filter(id=data['id'])
        # this_num = data['num']
        old_num = this_kala[0].num
        if old_num=="ناموجود":
            old_num = 0
            new_num = int(digits.en_to_fa(old_num))+digits.en_to_fa(int(data['num']))
        else:
            new_num = int(digits.en_to_fa(old_num))+digits.en_to_fa(int(data['num']))
        this_kala.update(num=new_num)
        return JsonResponse({'status':'ok'},encoder=JSONEncoder)
    except:
        return JsonResponse({'status':'error'},encoder=JSONEncoder)

@csrf_exempt
def add_num_hejab_chador(request):
    try:
        data = request.POST
        this_kala = Hejab_chador.objects.filter(id=data['id'])
        # this_num = data['num']
        old_num = this_kala[0].num
        if old_num=="ناموجود":
            old_num = 0
            new_num = int(digits.en_to_fa(old_num))+digits.en_to_fa(int(data['num']))
        else:
            new_num = int(digits.en_to_fa(old_num))+digits.en_to_fa(int(data['num']))
        this_kala.update(num=new_num)
        return JsonResponse({'status':'ok'},encoder=JSONEncoder)
    except:
        return JsonResponse({'status':'error'},encoder=JSONEncoder)

@csrf_exempt
def add_num_hejab_shal(request):
    try:
        data = request.POST
        this_kala = Hejab_shal.objects.filter(id=data['id'])
        # this_num = data['num']
        old_num = this_kala[0].num
        if old_num=="ناموجود":
            old_num = 0
            new_num = int(digits.en_to_fa(old_num))+digits.en_to_fa(int(data['num']))
        else:
            new_num = int(digits.en_to_fa(old_num))+digits.en_to_fa(int(data['num']))
        this_kala.update(num=new_num)
        return JsonResponse({'status':'ok'},encoder=JSONEncoder)
    except:
        return JsonResponse({'status':'error'},encoder=JSONEncoder)


@csrf_exempt
def add_num_hejab_roosari(request):
    try:
        data = request.POST
        this_kala = Hejab_roosari.objects.filter(id=data['id'])
        # this_num = data['num']
        old_num = this_kala[0].num
        if old_num=="ناموجود":
            old_num = 0
            new_num = int(digits.en_to_fa(old_num))+digits.en_to_fa(int(data['num']))
        else:
            new_num = int(digits.en_to_fa(old_num))+digits.en_to_fa(int(data['num']))
        this_kala.update(num=new_num)
        return JsonResponse({'status':'ok'},encoder=JSONEncoder)
    except:
        return JsonResponse({'status':'error'},encoder=JSONEncoder)


@csrf_exempt
def add_num_hejab_saghedast_dastkesh(request):
    try:
        data = request.POST
        this_kala = Hejab_saghedast_dastkesh.objects.filter(id=data['id'])
        # this_num = data['num']
        old_num = this_kala[0].num
        if old_num=="ناموجود":
            old_num = 0
            new_num = int(digits.en_to_fa(old_num))+digits.en_to_fa(int(data['num']))
        else:
            new_num = int(digits.en_to_fa(old_num))+digits.en_to_fa(int(data['num']))
        this_kala.update(num=new_num)
        return JsonResponse({'status':'ok'},encoder=JSONEncoder)
    except:
        return JsonResponse({'status':'error'},encoder=JSONEncoder)

@csrf_exempt
def add_num_hejab_mask_pooshie(request):
    try:
        data = request.POST
        this_kala = Hejab_mask_pooshie.objects.filter(id=data['id'])
        # this_num = data['num']
        old_num = this_kala[0].num
        if old_num=="ناموجود":
            old_num = 0
            new_num = int(digits.en_to_fa(old_num))+digits.en_to_fa(int(data['num']))
        else:
            new_num = int(digits.en_to_fa(old_num))+digits.en_to_fa(int(data['num']))
        this_kala.update(num=new_num)
        return JsonResponse({'status':'ok'},encoder=JSONEncoder)
    except:
        return JsonResponse({'status':'error'},encoder=JSONEncoder)

@csrf_exempt
def add_num_kharazi_abzarkhayati(request):
    try:
        data = request.POST
        this_kala = Kharazi_abzarkhayati.objects.filter(id=data['id'])
        # this_num = data['num']
        old_num = this_kala[0].num
        if old_num=="ناموجود":
            old_num = 0
            new_num = int(digits.en_to_fa(old_num))+digits.en_to_fa(int(data['num']))
        else:
            new_num = int(digits.en_to_fa(old_num))+digits.en_to_fa(int(data['num']))
        this_kala.update(num=new_num)
        return JsonResponse({'status':'ok'},encoder=JSONEncoder)
    except:
        return JsonResponse({'status':'error'},encoder=JSONEncoder)

@csrf_exempt
def add_num_kharazi_lavazemtahrir(request):
    try:
        data = request.POST
        this_kala = Kharazi_lavazemtahrir.objects.filter(id=data['id'])
        # this_num = data['num']
        old_num = this_kala[0].num
        if old_num=="ناموجود":
            old_num = 0
            new_num = int(digits.en_to_fa(old_num))+digits.en_to_fa(int(data['num']))
        else:
            new_num = int(digits.en_to_fa(old_num))+digits.en_to_fa(int(data['num']))
        this_kala.update(num=new_num)
        return JsonResponse({'status':'ok'},encoder=JSONEncoder)
    except:
        return JsonResponse({'status':'error'},encoder=JSONEncoder)










@csrf_exempt
def add_num_sefaresh_mardane(request):
    try:
        data = request.POST
        this_kala = Sefaresh_mardane.objects.filter(id=data['id'])
        # this_num = data['num']
        old_num = this_kala[0].num
        if old_num=="ناموجود":
            old_num = 0
            new_num = int(digits.en_to_fa(old_num))+digits.en_to_fa(int(data['num']))
        else:
            new_num = int(digits.en_to_fa(old_num))+digits.en_to_fa(int(data['num']))
        this_kala.update(num=new_num)
        return JsonResponse({'status':'ok'},encoder=JSONEncoder)
    except:
        return JsonResponse({'status':'error'},encoder=JSONEncoder)

@csrf_exempt
def add_num_sefaresh_zanane(request):
    try:
        data = request.POST
        this_kala = Sefaresh_zanane.objects.filter(id=data['id'])
        # this_num = data['num']
        old_num = this_kala[0].num
        if old_num=="ناموجود":
            old_num = 0
            new_num = int(digits.en_to_fa(old_num))+digits.en_to_fa(int(data['num']))
        else:
            new_num = int(digits.en_to_fa(old_num))+digits.en_to_fa(int(data['num']))
        this_kala.update(num=new_num)
        return JsonResponse({'status':'ok'},encoder=JSONEncoder)
    except:
        return JsonResponse({'status':'error'},encoder=JSONEncoder)

@csrf_exempt
def add_num_sefaresh_dokhtarane(request):
    try:
        data = request.POST
        this_kala = Sefaresh_dokhtarane.objects.filter(id=data['id'])
        # this_num = data['num']
        old_num = this_kala[0].num
        if old_num=="ناموجود":
            old_num = 0
            new_num = int(digits.en_to_fa(old_num))+digits.en_to_fa(int(data['num']))
        else:
            new_num = int(digits.en_to_fa(old_num))+digits.en_to_fa(int(data['num']))
        this_kala.update(num=new_num)
        return JsonResponse({'status':'ok'},encoder=JSONEncoder)
    except:
        return JsonResponse({'status':'error'},encoder=JSONEncoder)

@csrf_exempt
def add_num_sefaresh_pesarane(request):
    try:
        data = request.POST
        this_kala = Sefaresh_pesarane.objects.filter(id=data['id'])
        # this_num = data['num']
        old_num = this_kala[0].num
        if old_num=="ناموجود":
            old_num = 0
            new_num = int(digits.en_to_fa(old_num))+digits.en_to_fa(int(data['num']))
        else:
            new_num = int(digits.en_to_fa(old_num))+digits.en_to_fa(int(data['num']))
        this_kala.update(num=new_num)
        return JsonResponse({'status':'ok'},encoder=JSONEncoder)
    except:
        return JsonResponse({'status':'error'},encoder=JSONEncoder)

@csrf_exempt
def add_num_sefaresh_nozadi(request):
    try:
        data = request.POST
        this_kala = Sefaresh_nozadi.objects.filter(id=data['id'])
        # this_num = data['num']
        old_num = this_kala[0].num
        if old_num=="ناموجود":
            old_num = 0
            new_num = int(digits.en_to_fa(old_num))+digits.en_to_fa(int(data['num']))
        else:
            new_num = int(digits.en_to_fa(old_num))+digits.en_to_fa(int(data['num']))
        this_kala.update(num=new_num)
        return JsonResponse({'status':'ok'},encoder=JSONEncoder)
    except:
        return JsonResponse({'status':'error'},encoder=JSONEncoder)

@csrf_exempt
def add_num_sefaresh_sayer(request):
    try:
        data = request.POST
        this_kala = Sefaresh_sayer.objects.filter(id=data['id'])
        # this_num = data['num']
        old_num = this_kala[0].num
        if old_num=="ناموجود":
            old_num = 0
            new_num = int(digits.en_to_fa(old_num))+digits.en_to_fa(int(data['num']))
        else:
            new_num = int(digits.en_to_fa(old_num))+digits.en_to_fa(int(data['num']))
        this_kala.update(num=new_num)
        return JsonResponse({'status':'ok'},encoder=JSONEncoder)
    except:
        return JsonResponse({'status':'error'},encoder=JSONEncoder)




# remove num's from models.objects

@csrf_exempt
def remove_num_pooshak(request):
    try:
        data = request.POST
        this_kala = Pooshak.objects.filter(id=data['id'])
        # this_num = data['num']
        old_num = this_kala[0].num
        if int(old_num)==0:
            new_num = "ناموجود"
        else:
            new_num = int(old_num)-int(data['num'])
            if int(new_num)==0:
                new_num = "ناموجود"
        this_kala.update(num=new_num)
        return JsonResponse({'status':'ok'},encoder=JSONEncoder)
    except:
        return JsonResponse({'status':'error'},encoder=JSONEncoder)
 

@csrf_exempt
def remove_num_parcheh(request):
    try:
        data = request.POST
        this_kala = Parcheh.objects.filter(id=data['id'])
        # this_num = data['num']
        old_num = this_kala[0].num
        """
        if int(old_num)==0:
            new_num = "ناموجود"
        else:
            new_num = int(old_num)-int(data['num'])
            if int(new_num)==0:
                new_num = "ناموجود"
        """
        new_num = int(old_num)-int(data['num'])
        this_kala.update(num=new_num)
        return JsonResponse({'status':'ok'},encoder=JSONEncoder)
    except:
        return JsonResponse({'status':'error'},encoder=JSONEncoder)


@csrf_exempt
def remove_num_kharazi(request):
    try:
        data = request.POST
        this_kala = Kharazi.objects.filter(id=data['id'])
        # this_num = data['num']
        old_num = this_kala[0].num
        """
        if int(old_num)==0:
            new_num = "ناموجود"
        else:
            new_num = int(old_num)-int(data['num'])
            if int(new_num)==0:
                new_num = "ناموجود"
        """
        new_num = int(old_num)-int(data['num'])
        this_kala.update(num=new_num)
        return JsonResponse({'status':'ok'},encoder=JSONEncoder)
    except:
        return JsonResponse({'status':'error'},encoder=JSONEncoder)

    
@csrf_exempt
def remove_num_hejab(request):
    try:
        data = request.POST
        this_kala = Hejab.objects.filter(id=data['id'])
        # this_num = data['num']
        old_num = this_kala[0].num
        """
        if int(old_num)==0:
            new_num = "ناموجود"
        else:
            new_num = int(old_num)-int(data['num'])
            if int(new_num)==0:
                new_num = "ناموجود"
        """
        new_num = int(old_num)-int(data['num'])

        this_kala.update(num=new_num)
        return JsonResponse({'status':'ok'},encoder=JSONEncoder)
    except:
        return JsonResponse({'status':'error'},encoder=JSONEncoder)

@csrf_exempt
def remove_num_pooshak_mardane(request):

    try:
        data = request.POST
        this_kala = Pooshak_mardane.objects.filter(id=data['id'])
        old_num = this_kala[0].num
        count_color = -1
        count_size = -1
        for i in this_kala[0].color_size["result"]:
            count_color += 1
            if i["color"]==data["color"]:
                for j in i["size"]:
                    count_size += 1
                    if j["size"]==data["size"]:
                        print(j["num"])
                        old_num = int(j["num"])
                        new_num = int(old_num)-int(data["num"])
                        print(new_num)
                        new_color_size = this_kala[0].color_size
                        new_color_size["result"][count_color]["size"][count_size]["num"] = str(new_num)
                        this_kala.update(color_size=new_color_size)
                        print(this_kala[0].color_size["result"][count_color])
                        this_kala[0].save()
                        print(this_kala[0].color_size)

        """
        if int(old_num)==0:
            new_num = "ناموجود"
        else:
            new_num = int(old_num)-int(data['num'])
            if int(new_num)==0:
                new_num = "ناموجود"
        """
        new_num = int(old_num)-int(data['num'])
        print(new_num)
        this_kala.update(num=new_num)
        return JsonResponse({'status':'ok'},encoder=JSONEncoder)

    except:
        return JsonResponse({'status':'error'},encoder=JSONEncoder)

@csrf_exempt
def remove_num_pooshak_zanane(request):
    try:
        data = request.POST
        this_kala = Pooshak_zanane.objects.filter(id=data['id'])
        # this_num = data['num']
        old_num = this_kala[0].num
        count_color = -1
        count_size = -1
        for i in this_kala[0].color_size["result"]:
            count_color += 1
            if i["color"]==data["color"]:
                for j in i["size"]:
                    count_size += 1
                    if j["size"]==data["size"]:
                        print(j["num"])
                        old_num = int(j["num"])
                        new_num = int(old_num)-int(data["num"])
                        print(new_num)
                        new_color_size = this_kala[0].color_size
                        new_color_size["result"][count_color]["size"][count_size]["num"] = str(new_num)
                        this_kala.update(color_size=new_color_size)
                        print(this_kala[0].color_size["result"][count_color])
                        this_kala[0].save()
                        print(this_kala[0].color_size)
        """
        if int(old_num)==0:
            new_num = "ناموجود"
        else:
            new_num = int(old_num)-int(data['num'])
            if int(new_num)==0:
                new_num = "ناموجود"
        """
        new_num = int(old_num)-int(data['num'])
        this_kala.update(num=new_num)
        return JsonResponse({'status':'ok'},encoder=JSONEncoder)
    except:
        return JsonResponse({'status':'error'},encoder=JSONEncoder)

@csrf_exempt
def remove_num_pooshak_dokhtarane(request):
    try:
        data = request.POST
        this_kala = Pooshak_dokhtarane.objects.filter(id=data['id'])
        # this_num = data['num']
        old_num = this_kala[0].num
        count_color = -1
        count_size = -1
        for i in this_kala[0].color_size["result"]:
            count_color += 1
            if i["color"]==data["color"]:
                for j in i["size"]:
                    count_size += 1
                    if j["size"]==data["size"]:
                        print(j["num"])
                        old_num = int(j["num"])
                        new_num = int(old_num)-int(data["num"])
                        print(new_num)
                        new_color_size = this_kala[0].color_size
                        new_color_size["result"][count_color]["size"][count_size]["num"] = str(new_num)
                        this_kala.update(color_size=new_color_size)
                        print(this_kala[0].color_size["result"][count_color])
                        this_kala[0].save()
                        print(this_kala[0].color_size)
        
        """
        if int(old_num)==0:
            new_num = "ناموجود"
        else:
            new_num = int(old_num)-int(data['num'])
            if int(new_num)==0:
                new_num = "ناموجود"
        """
        new_num = int(old_num)-int(data['num'])
        this_kala.update(num=new_num)
        return JsonResponse({'status':'ok'},encoder=JSONEncoder)
    except:
        return JsonResponse({'status':'error'},encoder=JSONEncoder)

@csrf_exempt
def remove_num_pooshak_pesarane(request):
    try:
        data = request.POST
        this_kala = Pooshak_pesarane.objects.filter(id=data['id'])
        # this_num = data['num']
        old_num = this_kala[0].num
        count_color = -1
        count_size = -1
        for i in this_kala[0].color_size["result"]:
            count_color += 1
            if i["color"]==data["color"]:
                for j in i["size"]:
                    count_size += 1
                    if j["size"]==data["size"]:
                        print(j["num"])
                        old_num = int(j["num"])
                        new_num = int(old_num)-int(data["num"])
                        print(new_num)
                        new_color_size = this_kala[0].color_size
                        new_color_size["result"][count_color]["size"][count_size]["num"] = str(new_num)
                        this_kala.update(color_size=new_color_size)
                        print(this_kala[0].color_size["result"][count_color])
                        this_kala[0].save()
                        print(this_kala[0].color_size)
        """
        if int(old_num)==0:
            new_num = "ناموجود"
        else:
            new_num = int(old_num)-int(data['num'])
            if int(new_num)==0:
                new_num = "ناموجود"
        """
        new_num = int(old_num)-int(data['num'])
        this_kala.update(num=new_num)
        return JsonResponse({'status':'ok'},encoder=JSONEncoder)
    except:
        return JsonResponse({'status':'error'},encoder=JSONEncoder)


@csrf_exempt
def remove_num_pooshak_nozadi(request):
    try:
        data = request.POST
        this_kala = Pooshak_nozadi.objects.filter(id=data['id'])
        # this_num = data['num']
        old_num = this_kala[0].num
        count_color = -1
        count_size = -1
        for i in this_kala[0].color_size["result"]:
            count_color += 1
            if i["color"]==data["color"]:
                for j in i["size"]:
                    count_size += 1
                    if j["size"]==data["size"]:
                        print(j["num"])
                        old_num = int(j["num"])
                        new_num = int(old_num)-int(data["num"])
                        print(new_num)
                        new_color_size = this_kala[0].color_size
                        new_color_size["result"][count_color]["size"][count_size]["num"] = str(new_num)
                        this_kala.update(color_size=new_color_size)
                        print(this_kala[0].color_size["result"][count_color])
                        this_kala[0].save()
                        print(this_kala[0].color_size)
        """
        if int(old_num)==0:
            new_num = "ناموجود"
        else:
            new_num = int(old_num)-int(data['num'])
            if int(new_num)==0:
                new_num = "ناموجود"
        """
        new_num = int(old_num)-int(data['num'])
        this_kala.update(num=new_num)
        return JsonResponse({'status':'ok'},encoder=JSONEncoder)
    except:
        return JsonResponse({'status':'error'},encoder=JSONEncoder)

@csrf_exempt
def remove_num_hejab_chador(request):
    try:
        data = request.POST
        this_kala = Hejab_chador.objects.filter(id=data['id'])
        # this_num = data['num']
        old_num = this_kala[0].num
        count_color = -1
        count_size = -1
        for i in this_kala[0].color_size["result"]:
            count_color += 1
            if i["color"]==data["color"]:
                for j in i["size"]:
                    count_size += 1
                    if j["size"]==data["size"]:
                        print(j["num"])
                        old_num = int(j["num"])
                        new_num = int(old_num)-int(data["num"])
                        print(new_num)
                        new_color_size = this_kala[0].color_size
                        new_color_size["result"][count_color]["size"][count_size]["num"] = str(new_num)
                        this_kala.update(color_size=new_color_size)
                        print(this_kala[0].color_size["result"][count_color])
                        this_kala[0].save()
                        print(this_kala[0].color_size)
        """
        if int(old_num)==0:
            new_num = "ناموجود"
        else:
            new_num = int(old_num)-int(data['num'])
            if int(new_num)==0:
                new_num = "ناموجود"
        """
        new_num = int(old_num)-int(data['num'])
        this_kala.update(num=new_num)
        return JsonResponse({'status':'ok'},encoder=JSONEncoder)
    except:
        return JsonResponse({'status':'error'},encoder=JSONEncoder)

@csrf_exempt
def remove_num_hejab_shal(request):
    try:
        data = request.POST
        this_kala = Hejab_shal.objects.filter(id=data['id'])
        # this_num = data['num']
        old_num = this_kala[0].num
        count_color = -1
        count_size = -1
        for i in this_kala[0].color_size["result"]:
            count_color += 1
            if i["color"]==data["color"]:
                for j in i["size"]:
                    count_size += 1
                    if j["size"]==data["size"]:
                        print(j["num"])
                        old_num = int(j["num"])
                        new_num = int(old_num)-int(data["num"])
                        print(new_num)
                        new_color_size = this_kala[0].color_size
                        new_color_size["result"][count_color]["size"][count_size]["num"] = str(new_num)
                        this_kala.update(color_size=new_color_size)
                        print(this_kala[0].color_size["result"][count_color])
                        this_kala[0].save()
                        print(this_kala[0].color_size)
        """
        if int(old_num)==0:
            new_num = "ناموجود"
        else:
            new_num = int(old_num)-int(data['num'])
            if int(new_num)==0:
                new_num = "ناموجود"
        """
        new_num = int(old_num)-int(data['num'])
        this_kala.update(num=new_num)
        return JsonResponse({'status':'ok'},encoder=JSONEncoder)
    except:
        return JsonResponse({'status':'error'},encoder=JSONEncoder)


@csrf_exempt
def remove_num_hejab_roosari(request):
    try:
        data = request.POST
        this_kala = Hejab_roosari.objects.filter(id=data['id'])
        # this_num = data['num']
        old_num = this_kala[0].num
        count_color = -1
        count_size = -1
        for i in this_kala[0].color_size["result"]:
            count_color += 1
            if i["color"]==data["color"]:
                for j in i["size"]:
                    count_size += 1
                    if j["size"]==data["size"]:
                        print(j["num"])
                        old_num = int(j["num"])
                        new_num = int(old_num)-int(data["num"])
                        print(new_num)
                        new_color_size = this_kala[0].color_size
                        new_color_size["result"][count_color]["size"][count_size]["num"] = str(new_num)
                        this_kala.update(color_size=new_color_size)
                        print(this_kala[0].color_size["result"][count_color])
                        this_kala[0].save()
                        print(this_kala[0].color_size)
        """
        if int(old_num)==0:
            new_num = "ناموجود"
        else:
            new_num = int(old_num)-int(data['num'])
            if int(new_num)==0:
                new_num = "ناموجود"
        """
        new_num = int(old_num)-int(data['num'])
        this_kala.update(num=new_num)
        return JsonResponse({'status':'ok'},encoder=JSONEncoder)
    except:
        return JsonResponse({'status':'error'},encoder=JSONEncoder)

@csrf_exempt
def remove_num_hejab_saghedast_dastkesh(request):
    try:
        data = request.POST
        this_kala = Hejab_saghedast_dastkesh.objects.filter(id=data['id'])
        # this_num = data['num']
        old_num = this_kala[0].num
        count_color = -1
        count_size = -1
        for i in this_kala[0].color_size["result"]:
            count_color += 1
            if i["color"]==data["color"]:
                for j in i["size"]:
                    count_size += 1
                    if j["size"]==data["size"]:
                        print(j["num"])
                        old_num = int(j["num"])
                        new_num = int(old_num)-int(data["num"])
                        print(new_num)
                        new_color_size = this_kala[0].color_size
                        new_color_size["result"][count_color]["size"][count_size]["num"] = str(new_num)
                        this_kala.update(color_size=new_color_size)
                        print(this_kala[0].color_size["result"][count_color])
                        this_kala[0].save()
                        print(this_kala[0].color_size)
        """
        if int(old_num)==0:
            new_num = "ناموجود"
        else:
            new_num = int(old_num)-int(data['num'])
            if int(new_num)==0:
                new_num = "ناموجود"
        """
        new_num = int(old_num)-int(data['num'])
        this_kala.update(num=new_num)
        return JsonResponse({'status':'ok'},encoder=JSONEncoder)
    except:
        return JsonResponse({'status':'error'},encoder=JSONEncoder)

@csrf_exempt
def remove_num_hejab_mask_pooshie(request):
    try:
        data = request.POST
        this_kala = Hejab_mask_pooshie.objects.filter(id=data['id'])
        # this_num = data['num']
        old_num = this_kala[0].num
        count_color = -1
        count_size = -1
        for i in this_kala[0].color_size["result"]:
            count_color += 1
            if i["color"]==data["color"]:
                for j in i["size"]:
                    count_size += 1
                    if j["size"]==data["size"]:
                        print(j["num"])
                        old_num = int(j["num"])
                        new_num = int(old_num)-int(data["num"])
                        print(new_num)
                        new_color_size = this_kala[0].color_size
                        new_color_size["result"][count_color]["size"][count_size]["num"] = str(new_num)
                        this_kala.update(color_size=new_color_size)
                        print(this_kala[0].color_size["result"][count_color])
                        this_kala[0].save()
                        print(this_kala[0].color_size)
        """
        if int(old_num)==0:
            new_num = "ناموجود"
        else:
            new_num = int(old_num)-int(data['num'])
            if int(new_num)==0:
                new_num = "ناموجود"
        """
        new_num = int(old_num)-int(data['num'])
        this_kala.update(num=new_num)
        return JsonResponse({'status':'ok'},encoder=JSONEncoder)
    except:
        return JsonResponse({'status':'error'},encoder=JSONEncoder)


@csrf_exempt
def remove_num_kharazi_abzarkhayati(request):
    try:
        data = request.POST
        this_kala = Kharazi_abzarkhayati.objects.filter(id=data['id'])
        # this_num = data['num']
        old_num = this_kala[0].num
        count_color = -1
        count_size = -1
        for i in this_kala[0].color_size["result"]:
            count_color += 1
            if i["color"]==data["color"]:
                for j in i["size"]:
                    count_size += 1
                    if j["size"]==data["size"]:
                        print(j["num"])
                        old_num = int(j["num"])
                        new_num = int(old_num)-int(data["num"])
                        print(new_num)
                        new_color_size = this_kala[0].color_size
                        new_color_size["result"][count_color]["size"][count_size]["num"] = str(new_num)
                        this_kala.update(color_size=new_color_size)
                        print(this_kala[0].color_size["result"][count_color])
                        this_kala[0].save()
                        print(this_kala[0].color_size) 
        """
        if int(old_num)==0:
            new_num = "ناموجود"
        else:
            new_num = int(old_num)-int(data['num'])
            if int(new_num)==0:
                new_num = "ناموجود"
        """
        new_num = int(old_num)-int(data['num'])
        this_kala.update(num=new_num)
        return JsonResponse({'status':'ok'},encoder=JSONEncoder)
    except:
        return JsonResponse({'status':'error'},encoder=JSONEncoder)


@csrf_exempt
def remove_num_kharazi_lavazemtahrir(request):
    try:
        data = request.POST
        this_kala = Kharazi_lavazemtahrir.objects.filter(id=data['id'])
        # this_num = data['num']
        old_num = this_kala[0].num
        count_color = -1
        count_size = -1
        for i in this_kala[0].color_size["result"]:
            count_color += 1
            if i["color"]==data["color"]:
                for j in i["size"]:
                    count_size += 1
                    if j["size"]==data["size"]:
                        print(j["num"])
                        old_num = int(j["num"])
                        new_num = int(old_num)-int(data["num"])
                        print(new_num)
                        new_color_size = this_kala[0].color_size
                        new_color_size["result"][count_color]["size"][count_size]["num"] = str(new_num)
                        this_kala.update(color_size=new_color_size)
                        print(this_kala[0].color_size["result"][count_color])
                        this_kala[0].save()
                        print(this_kala[0].color_size)
        """
        if int(old_num)==0:
            new_num = "ناموجود"
        else:
            new_num = int(old_num)-int(data['num'])
            if int(new_num)==0:
                new_num = "ناموجود"
        """
        new_num = int(old_num)-int(data['num'])
        this_kala.update(num=new_num)
        return JsonResponse({'status':'ok'},encoder=JSONEncoder)
    except:
        return JsonResponse({'status':'error'},encoder=JSONEncoder)











@csrf_exempt
def remove_num_sefaresh_mardane(request):
    try:
        data = request.POST
        this_kala = Sefaresh_mardane.objects.filter(id=data['id'])
        # this_num = data['num']
        old_num = this_kala[0].num
        count_color = -1
        count_size = -1
        for i in this_kala[0].color_size["result"]:
            count_color += 1
            if i["color"]==data["color"]:
                for j in i["size"]:
                    count_size += 1
                    if j["size"]==data["size"]:
                        print(j["num"])
                        old_num = int(j["num"])
                        new_num = int(old_num)-int(data["num"])
                        print(new_num)
                        new_color_size = this_kala[0].color_size
                        new_color_size["result"][count_color]["size"][count_size]["num"] = str(new_num)
                        this_kala.update(color_size=new_color_size)
                        print(this_kala[0].color_size["result"][count_color])
                        this_kala[0].save()
                        print(this_kala[0].color_size)
        """
        if int(old_num)==0:
            new_num = "ناموجود"
        else:
            new_num = int(old_num)-int(data['num'])
            if int(new_num)==0:
                new_num = "ناموجود"
        """
        new_num = int(old_num)-int(data['num'])
        this_kala.update(num=new_num)
        return JsonResponse({'status':'ok'},encoder=JSONEncoder)
    except:
        return JsonResponse({'status':'error'},encoder=JSONEncoder)

@csrf_exempt
def remove_num_sefaresh_zanane(request):
    try:
        data = request.POST
        this_kala = Sefaresh_zanane.objects.filter(id=data['id'])
        # this_num = data['num']
        old_num = this_kala[0].num
        count_color = -1
        count_size = -1
        for i in this_kala[0].color_size["result"]:
            count_color += 1
            if i["color"]==data["color"]:
                for j in i["size"]:
                    count_size += 1
                    if j["size"]==data["size"]:
                        print(j["num"])
                        old_num = int(j["num"])
                        new_num = int(old_num)-int(data["num"])
                        print(new_num)
                        new_color_size = this_kala[0].color_size
                        new_color_size["result"][count_color]["size"][count_size]["num"] = str(new_num)
                        this_kala.update(color_size=new_color_size)
                        print(this_kala[0].color_size["result"][count_color])
                        this_kala[0].save()
                        print(this_kala[0].color_size)
        """
        if int(old_num)==0:
            new_num = "ناموجود"
        else:
            new_num = int(old_num)-int(data['num'])
            if int(new_num)==0:
                new_num = "ناموجود"
        """
        new_num = int(old_num)-int(data['num'])
        this_kala.update(num=new_num)
        return JsonResponse({'status':'ok'},encoder=JSONEncoder)
    except:
        return JsonResponse({'status':'error'},encoder=JSONEncoder)

@csrf_exempt
def remove_num_sefaresh_dokhtarane(request):
    try:
        data = request.POST
        this_kala = Sefaresh_dokhtarane.objects.filter(id=data['id'])
        # this_num = data['num']
        old_num = this_kala[0].num
        count_color = -1
        count_size = -1
        for i in this_kala[0].color_size["result"]:
            count_color += 1
            if i["color"]==data["color"]:
                for j in i["size"]:
                    count_size += 1
                    if j["size"]==data["size"]:
                        print(j["num"])
                        old_num = int(j["num"])
                        new_num = int(old_num)-int(data["num"])
                        print(new_num)
                        new_color_size = this_kala[0].color_size
                        new_color_size["result"][count_color]["size"][count_size]["num"] = str(new_num)
                        this_kala.update(color_size=new_color_size)
                        print(this_kala[0].color_size["result"][count_color])
                        this_kala[0].save()
                        print(this_kala[0].color_size)
        """
        if int(old_num)==0:
            new_num = "ناموجود"
        else:
            new_num = int(old_num)-int(data['num'])
            if int(new_num)==0:
                new_num = "ناموجود"
        """
        new_num = int(old_num)-int(data['num'])
        this_kala.update(num=new_num)
        return JsonResponse({'status':'ok'},encoder=JSONEncoder)
    except:
        return JsonResponse({'status':'error'},encoder=JSONEncoder)

@csrf_exempt
def remove_num_sefaresh_pesarane(request):
    try:
        data = request.POST
        this_kala = Sefaresh_pesarane.objects.filter(id=data['id'])
        # this_num = data['num']
        old_num = this_kala[0].num
        count_color = -1
        count_size = -1
        for i in this_kala[0].color_size["result"]:
            count_color += 1
            if i["color"]==data["color"]:
                for j in i["size"]:
                    count_size += 1
                    if j["size"]==data["size"]:
                        print(j["num"])
                        old_num = int(j["num"])
                        new_num = int(old_num)-int(data["num"])
                        print(new_num)
                        new_color_size = this_kala[0].color_size
                        new_color_size["result"][count_color]["size"][count_size]["num"] = str(new_num)
                        this_kala.update(color_size=new_color_size)
                        print(this_kala[0].color_size["result"][count_color])
                        this_kala[0].save()
                        print(this_kala[0].color_size)
        """
        if int(old_num)==0:
            new_num = "ناموجود"
        else:
            new_num = int(old_num)-int(data['num'])
            if int(new_num)==0:
                new_num = "ناموجود"
        """
        new_num = int(old_num)-int(data['num'])
        this_kala.update(num=new_num)
        return JsonResponse({'status':'ok'},encoder=JSONEncoder)
    except:
        return JsonResponse({'status':'error'},encoder=JSONEncoder)


@csrf_exempt
def remove_num_sefaresh_nozadi(request):
    try:
        data = request.POST
        this_kala = Sefaresh_nozadi.objects.filter(id=data['id'])
        # this_num = data['num']
        old_num = this_kala[0].num
        count_color = -1
        count_size = -1
        for i in this_kala[0].color_size["result"]:
            count_color += 1
            if i["color"]==data["color"]:
                for j in i["size"]:
                    count_size += 1
                    if j["size"]==data["size"]:
                        print(j["num"])
                        old_num = int(j["num"])
                        new_num = int(old_num)-int(data["num"])
                        print(new_num)
                        new_color_size = this_kala[0].color_size
                        new_color_size["result"][count_color]["size"][count_size]["num"] = str(new_num)
                        this_kala.update(color_size=new_color_size)
                        print(this_kala[0].color_size["result"][count_color])
                        this_kala[0].save()
                        print(this_kala[0].color_size)
        """
        if int(old_num)==0:
            new_num = "ناموجود"
        else:
            new_num = int(old_num)-int(data['num'])
            if int(new_num)==0:
                new_num = "ناموجود"
        """
        new_num = int(old_num)-int(data['num'])
        this_kala.update(num=new_num)
        return JsonResponse({'status':'ok'},encoder=JSONEncoder)
    except:
        return JsonResponse({'status':'error'},encoder=JSONEncoder)

@csrf_exempt
def remove_num_sefaresh_sayer(request):
    try:
        data = request.POST
        this_kala = Sefaresh_sayer.objects.filter(id=data['id'])
        # this_num = data['num']
        old_num = this_kala[0].num
        count_color = -1
        count_size = -1
        for i in this_kala[0].color_size["result"]:
            count_color += 1
            if i["color"]==data["color"]:
                for j in i["size"]:
                    count_size += 1
                    if j["size"]==data["size"]:
                        print(j["num"])
                        old_num = int(j["num"])
                        new_num = int(old_num)-int(data["num"])
                        print(new_num)
                        new_color_size = this_kala[0].color_size
                        new_color_size["result"][count_color]["size"][count_size]["num"] = str(new_num)
                        this_kala.update(color_size=new_color_size)
                        print(this_kala[0].color_size["result"][count_color])
                        this_kala[0].save()
                        print(this_kala[0].color_size)
        """
        if int(old_num)==0:
            new_num = "ناموجود"
        else:
            new_num = int(old_num)-int(data['num'])
            if int(new_num)==0:
                new_num = "ناموجود"
        """
        new_num = int(old_num)-int(data['num'])
        this_kala.update(num=new_num)
        return JsonResponse({'status':'ok'},encoder=JSONEncoder)
    except:
        return JsonResponse({'status':'error'},encoder=JSONEncoder)




# upload img to django function

@csrf_exempt
def maryam(request):
    infos = Pooshak.objects.all()
    if request.method == 'POST':
        form = ImageForm(request.POST, request.FILES)
        if form.is_valid():
            Pooshak(img=request.FILES['image']).save()
            # return redirect('maryam:maryam')
            # return JsonResponse({'status':'ok'},encoder=JSONEncoder)
            return render(request, 'upload_img.html', {'form':form, 'infos':infos,'status':f'{str(request.FILES["image"])}'})

    else:   
        form = ImageForm()
    return render(request, 'upload_img.html', {'form':form, 'infos':infos,'status':'هنوز فایلی آپلود نشده است'})



# send message to eitaa

@csrf_exempt
def send_message(request):
    data = {"chat_id":"7819430","text":request.POST['text']}
    requests.post("https://eitaayar.ir/api/bot20579:cdf451e2-577d-46bc-a768-59c764c41aeb/sendmessage",data=data)
    return JsonResponse({'status':'ok','result':request.POST},encoder=JSONEncoder)



@csrf_exempt
def send_comment(request):
    print(request.POST)
    data = {"chat_id":"7892910","text":request.POST['text']}
    requests.post("https://eitaayar.ir/api/bot20579:cdf451e2-577d-46bc-a768-59c764c41aeb/sendmessage",data=data)
    this_user = User.objects.filter(username=request.POST['user'])[0]
    Comment.objects.create(user=this_user,name=request.POST['text'][27:])
    return JsonResponse({'status':'ok','result':request.POST},encoder=JSONEncoder)


@csrf_exempt
def send_signup_class(request):
    print(request.POST)
    data = {"chat_id":"7893474","text":request.POST['text']}
    requests.post("https://eitaayar.ir/api/bot20579:cdf451e2-577d-46bc-a768-59c764c41aeb/sendmessage",data=data)
    return JsonResponse({'status':'ok','result':request.POST},encoder=JSONEncoder)

# cart views
    
@csrf_exempt
def add_to_cart(request):
    # try:
    data = request.POST
    this_user = User.objects.filter(username=data['user'])[0]
    this_kala = Cart.objects.create(user=this_user,name=data['name'],amount=data['amount'],text=data['text'],img=data['img'],num=data['num'],this_id=data['this_id'],old_num=data['old_num'],group=data['group'],color=data["color"],size=data["size"])
    return JsonResponse({'status':'ok'},encoder=JSONEncoder)
    # except:
    #     return JsonResponse({'status':'error'},encoder=JSONEncoder)
@csrf_exempt
def delete_from_cart(request):
    try:
        data = request.POST
        print(data)
        this_user = User.objects.filter(username=data['user'])[0]
        this_kala = Cart.objects.filter(user=this_user,name=data['name'],amount=data['amount'],img=data['img']).delete()
        return JsonResponse({'status':'ok'},encoder=JSONEncoder)
    except:
        return JsonResponse({'status':'error'},encoder=JSONEncoder)

@csrf_exempt
def get_all_cart(request):
    all = []
    count = 0
    data = request.POST
    this_user = User.objects.filter(username=data['user'])[0]
    this_user_cart = Cart.objects.filter(user=this_user)
    for kala in this_user_cart:
        count += 1
        exec("this_kala{0}=".format(count)+"{}"+";this_kala{0}['id']='{7}';this_kala{0}['name']='{1}';this_kala{0}['amount']='{2}';this_kala{0}['img']='{4}';this_kala{0}['num']='{5}';this_kala{0}['old_num']='{8}';this_kala{0}['text']='{9}';this_kala{0}['group']='{6}';this_kala{0}['color']='{10}';this_kala{0}['size']='{11}';all.append(this_kala{0})".format(count,kala.name,kala.amount,kala.kala_address,kala.img,kala.num,kala.group,kala.this_id,kala.old_num,kala.text,kala.color,kala.size))
    return JsonResponse({'status':'ok','result': all},encoder=JSONEncoder)
@csrf_exempt
def edit_cart(request):
    # try:
    data = request.POST
    this_user = User.objects.filter(username=data['user'])[0]
    this_kala = Cart.objects.filter(user=this_user,name=data['name'])
    this_kala.update(num=data['num'])
    return JsonResponse({'status':'ok'},encoder=JSONEncoder)
    # except:
    #     return JsonResponse({'status':'error'},encoder=JSONEncoder)


# comment views

@csrf_exempt
def get_comments(request):
    data = request.POST
    all = []
    count = 0
    this_user = User.objects.filter(username=data['user'])[0]
    this_user_comments = Comment.objects.filter(user=this_user)
    for comment in this_user_comments:
        count += 1
        exec("this_kala{0}=".format(count)+"{}"+";this_kala{0}['name']='{1}';all.append(this_kala{0})".format(count,comment.name))
    return JsonResponse({'status':'ok','result': all},encoder=JSONEncoder)


@csrf_exempt
def delete_comments(request):
    data = request.POST
    for comment in Comment.objects.filter(name=data['name']):
        comment.delete()
    return JsonResponse({'status':'ok'},encoder=JSONEncoder)


@csrf_exempt
def get_update(request):
    new_update = {}
    count = 0
    try:
        updates = Update.objects.all()[0]
        new_update['version'] = updates.version
        new_update['name'] = updates.name
        new_update['link'] = updates.link
        new_update_list = updates.new
        new_update['new'] = new_update_list.split(";")
    except:
        new_update = "Not New Update"
    return JsonResponse({'status':'ok','result': new_update},encoder=JSONEncoder)

@csrf_exempt
def get_all_tarikhche_kharid(request):
    data = request.POST
    all = []
    count = 0
    this_user = User.objects.filter(username=data['user'])[0]
    this_user_tarikhche = Tarikhche_kharid.objects.filter(username=this_user)
    for tarikhche in this_user_tarikhche:
        count+=1
        exec("this_kala{0}=".format(count)+"{}"+";this_kala{0}['tel_id']='{9}';this_kala{0}['address']='{10}';this_kala{0}['post_code']='{11}';this_kala{0}['id']='{7}';this_kala{0}['name']='{1}';this_kala{0}['amount']='{2}';this_kala{0}['img']='{4}';this_kala{0}['num']='{5}';this_kala{0}['text']='{8}';this_kala{0}['group']='{6}';this_kala{0}['color']='{12}';this_kala{0}['size']='{13}';all.append(this_kala{0})".format(count,tarikhche.name,tarikhche.amount,tarikhche.text,tarikhche.img,tarikhche.num,tarikhche.group,tarikhche.id,tarikhche.text,tarikhche.tel_id,tarikhche.address,tarikhche.post_code,tarikhche.color,tarikhche.size))
 
    return JsonResponse({'status':'ok','result':all},encoder=JSONEncoder)

@csrf_exempt
def get_all_tarikhche_kharid_admin(request):
    data = request.POST
    all = []
    count = 0
    this_user_tarikhche = Tarikhche_kharid.objects.all().reverse()
    for tarikhche in this_user_tarikhche:
        count+=1
        exec("this_kala{0}=".format(count)+"{}"+";this_kala{0}['tel_id']='{9}';this_kala{0}['username']='{14}';this_kala{0}['address']='{10}';this_kala{0}['post_code']='{11}';this_kala{0}['id']='{7}';this_kala{0}['name']='{1}';this_kala{0}['amount']='{2}';this_kala{0}['img']='{4}';this_kala{0}['num']='{5}';this_kala{0}['text']='{8}';this_kala{0}['group']='{6}';this_kala{0}['color']='{12}';this_kala{0}['size']='{13}';all.append(this_kala{0})".format(count,tarikhche.name,tarikhche.amount,tarikhche.text,tarikhche.img,tarikhche.num,tarikhche.group,tarikhche.id,tarikhche.text,tarikhche.tel_id,tarikhche.address,tarikhche.post_code,tarikhche.color,tarikhche.size,tarikhche.username))
 
    return JsonResponse({'status':'ok','result':all},encoder=JSONEncoder)



@csrf_exempt
def add_new_tarikhche_kharid(request):
    data = request.POST
    
    this_user =  User.objects.filter(username=data['username']).get()
    this_tarikhche = Tarikhche_kharid.objects.create(username=str(this_user.username),password=str(this_user.password),phone_number=str(this_user.phone_number),tel_id=str(this_user.tel_id),address=str(this_user.address),post_code=str(this_user.post_code),name=data['name'],text=data['text'],img=data['img'],amount=data['amount'],num=data['num'],group=data['group'],color=data['color'],size=data['size'])
    return JsonResponse({'status':'ok'},encoder=JSONEncoder)
    """
    except:
        return JsonResponse({'status':'error'},encoder=JSONEncoder)
"""


@csrf_exempt
def add_signup_class(request):
    data = request.POST

    this_user = User.objects.filter(username=data["username"])[0]
    this_signup_class = SignupClass.objects.create(username=str(this_user.username),phone_number=data["phonenumber"],tel_id=data["tel_id"],address=data["address"],group=data["group"])
    return JsonResponse({"status":"ok"},encoder=JSONEncoder)

@csrf_exempt
def get_all_signup_class(request):
    data = request.POST

    all = []

    count = 0
    
    all_signup = SignupClass.objects.all()

    for i in all_signup:
        count += 1
        exec("this_kala{0}=".format(count)+"{}"+";this_kala{0}['tel_id']='{1}';this_kala{0}['username']='{2}';this_kala{0}['address']='{3}';this_kala{0}['phonenumber']='{4}';this_kala{0}['group']='{5}';all.append(this_kala{0})".format(count,i.tel_id,i.username,i.address,i.phone_number,i.group))

    return JsonResponse({'status':'ok','result':all})
